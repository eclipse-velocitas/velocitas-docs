<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" type="text/css" href="//www.eclipse.org/eclipse.org-common/themes/solstice/public/stylesheets/vendor/cookieconsent/cookieconsent.min.css" />
<link rel="stylesheet" type="text/css" href="/velocitas/css/overwrite.css" />
<script src="//www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/vendor/cookieconsent/default.min.js"></script>

<script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5WLCZXC');
</script>


<meta name="generator" content="Hugo 0.110.0">
<link rel="canonical" type="text/html" href="/velocitas/docs/concepts/">
<link rel="alternate" type="application/rss&#43;xml" href="/velocitas/docs/concepts/index.xml">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/velocitas/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/velocitas/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/velocitas/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/velocitas/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/velocitas/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/velocitas/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/velocitas/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/velocitas/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/velocitas/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/velocitas/favicons/android-192x192.png" sizes="192x192">

<title>Concepts | Velocitas</title>
<meta name="description" content="Overview of Velocitas Concepts.
">
<meta property="og:title" content="Concepts" />
<meta property="og:description" content="Overview of Velocitas Concepts.
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/velocitas/docs/concepts/" />
<meta itemprop="name" content="Concepts">
<meta itemprop="description" content="Overview of Velocitas Concepts.
"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Concepts"/>
<meta name="twitter:description" content="Overview of Velocitas Concepts.
"/>




<link rel="preload" href="/velocitas/scss/main.min.4ebaddcfde6fc9e0acc62443eeb47c0964bcde6cb0949e7c6116262523aabe94.css" as="style">
<link href="/velocitas/scss/main.min.4ebaddcfde6fc9e0acc62443eeb47c0964bcde6cb0949e7c6116262523aabe94.css" rel="stylesheet" integrity="">

<script
  src=/velocitas/js/jquery-3.6.0.min.js
  integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
  crossorigin="anonymous"></script>
<script defer
  src="/velocitas/js/lunr-2.3.9.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>

  </head>
  <body class="td-section">
    <header>
      <nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
  <a class="navbar-brand" href="/velocitas/"><span class="navbar-brand__logo navbar-logo"><svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="180mm" height="40mm" style="clip-rule:evenodd;fill-rule:evenodd;image-rendering:optimizeQuality;shape-rendering:geometricPrecision;text-rendering:geometricPrecision" viewBox="0 0 7086.6144 1574.8032" id="svg983" sodipodi:docname="logo.svg" inkscape:version="1.0 (4035a4f, 2020-05-01)"><sodipodi:namedview inkscape:document-rotation="0" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="1920" inkscape:window-height="1080" id="namedview985" showgrid="false" showguides="false" units="mm" inkscape:zoom=".69602273" inkscape:cx="408" inkscape:cy="528" inkscape:window-x="0" inkscape:window-y="0" inkscape:window-maximized="0" inkscape:current-layer="Layer_x0020_1"/><defs id="defs967"><style id="style956">.fil5{fill:#24b2e4}.fil4{fill:#2e95c9}.fil3{fill:#2477b6}.fil2{fill:#2c5aa0}.fil1{fill:#364b95}.fil0{fill:url(#id0);fill-rule:nonzero}</style><linearGradient id="id0" gradientUnits="userSpaceOnUse" x1="3149.4299" y1="5635.5898" x2="7771.9399" y2="5635.5898"><stop offset="0" style="stop-opacity:1;stop-color:#2B6FB5" id="stop958"/><stop offset=".870588" style="stop-opacity:1;stop-color:#7DC5ED" id="stop960"/><stop offset=".988235" style="stop-opacity:1;stop-color:#7DC5ED" id="stop962"/><stop offset="1" style="stop-opacity:1;stop-color:#7DC5ED" id="stop964"/></linearGradient></defs><g id="Layer_x0020_1" transform="matrix(0.98370981,0,0,0.98370981,-626.40511,-4616.899)"><path class="fil0" d="m3395.11 6027.9h147.19l246.79-709.92h-116.2l-203.63 611.98-205.28-611.98h-114.54l245.68 709.92zm968.32-244.57v0-170.98c0-99.6-76.36-154.37-183.7-154.37h-131.69c-107.35.0-183.7 54.78-183.7 154.37v261.17c0 99.6 76.36 154.38 183.7 154.38h315.39v-82.44h-353.02c-28.22.0-37.63-18.26-37.63-47.59v-114.54zm-108.45-83v0h-282.2v-112.88c0-22.13 9.41-47.03 37.63-47.03h206.94c28.22.0 37.63 24.9 37.63 47.03zm258.95 327.57v0h108.45v-784.62h-108.45zm760.83-415.55v0c0-99.6-65.29-154.37-171.53-154.37h-158.81c-106.24.0-172.09 54.78-172.09 154.37v261.17c0 99.6 65.85 154.38 172.09 154.38h158.81c106.24.0 171.53-54.78 171.53-154.38zm-393.97 275.01v0-288.84c0-42.06 12.17-58.1 48.69-58.1h188.69c36.52.0 48.14 16.04 48.14 58.1v288.84c0 41.5-11.62 58.1-48.14 58.1h-188.69c-36.52.0-48.69-16.6-48.69-58.1zm631.35.0v0-288.84c0-42.06 11.62-58.1 48.14-58.1h272.79v-82.44h-256.19c-107.35.0-173.19 54.78-173.19 154.37v261.17c0 99.6 65.85 154.38 173.19 154.38h256.19v-82.44h-272.79c-36.52.0-48.14-16.6-48.14-58.1zm460.93 140.54v0h107.9v-569.93h-107.9zM5962 5362.25v0h130.03V5243.28H5962zm621.94 178.17v0-82.44h-168.76v-139.99h-76.36l-32.09 139.99h-85.77v82.44h85.77v332c0 96.28 54.78 155.48 180.39 155.48h96.83v-82.44h-120.63c-41.5.0-48.14-21.58-48.14-61.42v-343.61h168.76zm107.35 333.1v0c0 99.6 65.3 154.38 172.64 154.38h33.2c83.56.0 143.87-2.21 169.87-65.29v65.29h107.35v-415.55c0-99.6-76.36-154.37-183.71-154.37h-241.8v82.44h280.54c27.67.0 37.63 18.26 37.63 47.03v95.72h-203.07c-107.35.0-172.64 54.78-172.64 154.93v35.41zm108.45 13.83v0-63.63c0-39.29 10.52-55.89 42.61-57.55H7067v141.65c-3.32 26.56-13.28 37.63-43.16 37.63h-175.96c-36.52.0-48.14-16.6-48.14-58.1zm863.75 27.67v0c0 22.69-11.62 30.43-48.14 30.43H7324.3v82.44h275c107.35.0 172.64-54.78 172.64-154.38v-40.94c0-68.61-47.03-90.19-146.63-113.99-80.78-19.37-101.26-26.56-203.07-51.46v-96.83c0-22.13 11.62-29.88 48.14-29.88h282.2v-82.44h-266.15c-107.34.0-172.64 54.78-172.64 154.37v37.63c0 64.19 43.71 89.08 132.8 109.56 106.8 24.9 151.61 36.52 216.91 50.35v105.13z" id="path970" style="fill:url(#id0)"/><path class="fil1" d="m728.06 5018.07c722.09-309.86 1087.3 423.3 1320.24 889.75 88.54 177.62 156.59 313.19 195.88 317.61 67.5 8.3 132.24-294.37 240.7-1228.94l85.77 7.19C2455 5996.35 2361.49 6315.07 2233.12 6300.13 2145.14 6289.62 2069.33 6137.45 1969.73 5937.7c-219.12-438.78-562.74-1127.13-1203.49-852.12z" id="path972"/><path class="fil2" d="m900.14 4963.85c686.68-298.8 1022 350.81 1244.44 781.3 87.43 168.77 155.49 301.01 202.52 309.31 74.7 12.17 156.04-257.3 299.35-1107.76l85.22 10.51c-153.28 909.67-266.15 1193.53-400.61 1170.84-90.74-15.49-167.11-163.23-265.04-352.47C1857.97 5373.32 1544.78 4766.86 938.89 5030.8l-38.73-66.95z" id="path974"/><path class="fil3" d="m1056.18 4905.75c651.27-287.18 957.26 282.2 1168.63 675.61 85.21 158.25 153.27 285.52 207.5 298.24 82.45 18.81 180.94-216.35 359.11-986.03l84.66 14.39c-192.56 828.88-324.8 1076.78-465.35 1044.13-93.51-21.58-169.32-163.23-263.94-339.19-195.88-364.64-479.74-892.52-1051.88-640.2z" id="path976"/><path class="fil4" d="m1238.22 4844.88c616.96-276.66 894.18 216.35 1094.49 572.7 80.79 144.42 148.29 263.94 209.16 282.75 90.19 28.22 205.29-171.53 421.09-863.74l83.55 19.37c-234.61 751.97-386.78 961.13-533.96 915.2-93.51-29.33-167.66-161.57-257.3-320.93-183.71-327.57-438.79-780.75-977.74-538.39l-39.29-66.95z" id="path978"/><path class="fil5" d="m1406.99 4784.02c583.76-266.7 832.76 153.83 1020.89 471.99 75.25 127.27 139.99 236.83 205.28 263.38 99.05 40.94 231.85-120.07 489.15-740.91l80.79 25.45c-281.65 680.59-453.73 847.15-607 783.51-91.3-37.63-162.13-157.7-244.57-297.13-171.54-289.39-397.85-671.74-904.7-439.9l-39.84-66.4z" id="path980"/></g></svg></span><span class="navbar-brand__name">Velocitas</span></a>
  <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
    <ul class="navbar-nav mt-2 mt-lg-0">
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link active" href="/velocitas/docs/"><span class="active">Documentation</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="/velocitas/community/"><span>Community</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="https://github.com/eclipse-velocitas" target="_blank"><span>GitHub</span></a>
      </li>
      </ul>
  </div>
  <div class="navbar-nav d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/velocitas/offline-search-index.dfcf00e91a7b2374a8029256b36e43a9.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>

  </div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/velocitas/docs/concepts/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Concepts</h1>
<div class="lead">Overview of Velocitas Concepts.</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-50dbc3adb718274744ad08ddc3fd3ff6">Development Model</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>1.1: <a href="#pg-5e00cd625e8ebcb43adb8e1cc0e4286a">Vehicle App SDK</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.2: <a href="#pg-56b42987d464402649a2b538a1b4da6e">Vehicle Abstraction Layer (VAL)</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.3: <a href="#pg-e8c9a8068d61f8d591fb113a53a16f27">Vehicle App Manifest</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>1.3.1: <a href="#pg-06180eeeb3db30bb96ef0f450ecbd44a">Interfaces</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>1.3.1.1: <a href="#pg-1f917e5c4ebe6310155840cf69f6083b">Vehicle Signal Interface</a></li>


    
  
    
    
	
<li>1.3.1.2: <a href="#pg-8727a2523109aee6b695de754adbe1fb">gRPC Service Interface</a></li>


    
  
    
    
	
<li>1.3.1.3: <a href="#pg-ed6368117ef5ac95c9a264138bfe6bdc">Publish Subscribe</a></li>


    
  

    </ul>
    
  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>2: <a href="#pg-745cbbc500d280d83e9fcaf94ecea84b">Deployment Model</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.1: <a href="#pg-9128db8048cd1b7aedfb97ce89217631">Build and Release Process</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>3: <a href="#pg-29875608fcd98c3d414ef8014b3ecce8">Lifecycle Management</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>3.1: <a href="#pg-b1e17e9337e570b6cc90d7394e784ec5">Project Configuration</a></li>


    
  
    
    
	
<li>3.2: <a href="#pg-739ff68b439cc6c1e31af1160467137d">Velocitas CLI</a></li>


    
  
    
    
	
<li>3.3: <a href="#pg-6c3cb9c783c45dba527a8208038a7f5a">Phases</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>3.3.1: <a href="#pg-38dc69bce11fcbb8bd1b95cad7c70102">Create</a></li>


    
  

    </ul>
    
  
    
    
	
<li>3.4: <a href="#pg-98a2d3470ae00b0fbd2f906a853a46bd">Packages</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>3.4.1: <a href="#pg-dc4d8d47cec83fedb195b5f4b1967c54">Usage</a></li>


    
  
    
    
	
<li>3.4.2: <a href="#pg-63749fac4a2616727da54d76eb2022ff">Development</a></li>


    
  

    </ul>
    
  
    
    
	
<li>3.5: <a href="#pg-4687c53ccc9a9f3fecf47d97b4079d42">Troubleshooting</a></li>


    
  

    </ul>
    
  
    
    
	
<li>4: <a href="#pg-e87d2d922d0a384a3f8a70e87e29d33f">Logging guidelines</a></li>


    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-50dbc3adb718274744ad08ddc3fd3ff6">1 - Development Model</h1>
    <div class="lead">Learn more about provided development model for <em>Vehicle Apps</em>.</div>
	<p>The Velocitas development model is centered around what are known as <a href="#vehicle-apps"><em>Vehicle Apps</em></a>. Automation allows engineers to make high-impact changes frequently and deploy <em>Vehicle Apps</em> through cloud backends as over-the-air updates. The <em>Vehicle App</em> development model is about <em>speed</em> and <em>agility</em> paired with state-of-the-art software quality.</p>
<h2 id="development-architecture">Development Architecture</h2>
<p>Velocitas provides a flexible development architecture for <a href="#vehicle-apps"><em>Vehicle Apps</em></a>. The following diagram shows the major components of the Velocitas stack.</p>
<p><img src="./programming_model.png" alt="Programming Model"></p>
<h3 id="vehicle-apps">Vehicle Apps</h3>
<p>The Vehicle Applications (<em>Vehicle Apps</em>) contain the business logic that needs to be executed on a vehicle. A <em>Vehicle App</em> is implemented on top of a <a href="#vehicle-models">Vehicle Model</a> and its underlying language-specific <a href="#sdks">SDK</a>. Many concepts of cloud-native and <a href="https://12factor.net/" target="_blank" rel="noopener">twelve-factor</a> applications apply to <em>Vehicle Apps</em> as well and are summarized in the next chapter.</p>
<h3 id="vehicle-models">Vehicle Models</h3>
<p>A Vehicle Model makes it possible to easily get vehicle data from the <a href="#data-broker">Data Broker</a> and to execute remote procedure calls over gRPC against <a href="#vehicle-services">Vehicle Services</a> and other <a href="#vehicle-apps"><em>Vehicle Apps</em></a>. It is generated from the underlying <a href="#semantic-models">semantic models</a> for a concrete programming language as a graph-based, strongly-typed, intellisense-enabled library. The elements of the vehicle models are defined by the <a href="#sdks">SDKs</a>.</p>
<h3 id="sdks">SDKs</h3>
<p>Our SDKs, available for different programming languages, are the foundation for the vehicle abstraction provided by the vehicle model Furthermore, they offer abstraction from the underlying middleware and communication protocols, besides providing the base classes and utilities for the <em>Vehicle Apps</em>.
SDKs are available for Python and C++, currently. Further SDKs for Rust and C are planned.</p>
<h3 id="vehicle-services">Vehicle Services</h3>
<p>Vehicle Services provide service interfaces to control actuators or to trigger (complex) actions. E.g. they communicate with the vehicle internal networks like CAN or Ethernet, which are connected to actuators, electronic control units (ECUs) and other vehicle computers (VCs). They may provide a simulation mode to run without a network interface. Vehicle services may feed data to the <a href="#data-broker">Data Broker</a> and may expose gRPC endpoints, which can be invoked by <a href="#vehicle-apps"><em>Vehicle Apps</em></a> over a <a href="#vehicle-models">Vehicle Model</a>.</p>
<h3 id="data-broker">KUKSA Data Broker (aka Vehicle Data Broker)</h3>
<p>Vehicle data is stored in the KUKSA Data Broker conforming to an underlying <a href="#semantic-models">Semantic Model</a> like <a href="https://covesa.github.io/vehicle_signal_specification/" target="_blank" rel="noopener">VSS</a>. <a href="#vehicle-apps"><em>Vehicle Apps</em></a> can either pull this data or subscribe for updates. In addition, it supports rule-based access to reduce the number of updates sent to the <em>Vehicle App</em>.</p>
<h3 id="semantic-models">Semantic models</h3>
<p>The Vehicle Signal Specification (<a href="https://covesa.github.io/vehicle_signal_specification/" target="_blank" rel="noopener">VSS</a>) provides a domain taxonomy for vehicle signals and defines the vehicle data semantically, which is exchanged between <em>Vehicle Apps</em> and the Data Broker.</p>
<p>The Vehicle Service Catalog (<a href="https://github.com/COVESA/vehicle_service_catalog#vehicle-service-catalog" target="_blank" rel="noopener">VSC</a>) extends VSS with functional remote procedure call definitions and semantically defines the gRPC interfaces of Vehicle Services and <em>Vehicle Apps</em>.</p>
<p>As an alternative to VSS and VSC, vehicle data and services can be defined semantically in a general IoT modelling language like Digital Twin Definition Language (<a href="https://github.com/Azure/opendigitaltwins-dtdl/blob/master/DTDL/v2/dtdlv2.md" target="_blank" rel="noopener">DTDL</a>) or BAMM Aspect Meta Model <a href="https://github.com/OpenManufacturingPlatform/sds-bamm-aspect-meta-model" target="_blank" rel="noopener">BAMM</a> as well.</p>
<p>The Velocitas SDK is using <a href="https://covesa.github.io/vehicle_signal_specification/" target="_blank" rel="noopener">VSS</a> as the semantic model for the Vehicle Model.</p>
<h3 id="communication-protocols">Communication Protocols</h3>
<p>Asynchronous communication between <a href="#vehicle-apps"><em>Vehicle Apps</em></a> and other vehicle components, as well as cloud connectivity, is facilitated through <a href="https://mqtt.org/" target="_blank" rel="noopener">MQTT</a> messaging. Direct, synchronous communication between <a href="#vehicle-apps"><em>Vehicle Apps</em></a>, <a href="#vehicle-services">Vehicle Services</a> and the <a href="#data-broker">Data Broker</a> is based on the <a href="https://grpc.io/" target="_blank" rel="noopener">gRPC</a> protocol.</p>
<h3 id="middleware-abstraction">Middleware Abstraction</h3>
<p>Velocitas provides middleware abstraction interfaces for Service Discovery, PubSub Messaging Protocol and other cross-cutting functionality.
By default, Velocitas leverages <a href="https://dapr.io" target="_blank" rel="noopener">Dapr</a> for gRPC service discovery, Open Telemetry tracing and the <a href="https://docs.dapr.io/developing-applications/building-blocks/pubsub/pubsub-overview/" target="_blank" rel="noopener">publish/subscribe building block</a>.</p>
<h3 id="vehicle-edge-operating-system">Vehicle Edge Operating System</h3>
<p><a href="#vehicle-apps"><em>Vehicle Apps</em></a> are expected to run on a <a href="https://www.linux.org/" target="_blank" rel="noopener">Linux</a>-based operating system. An OCI-compliant container runtime is required to host the <em>Vehicle App</em> containers and the Dapr middleware mandates a Kubernetes control plane. For publish/subscribe messaging a MQTT broker must be available (e.g., <a href="https://mosquitto.org/" target="_blank" rel="noopener">Eclipse Mosquitto</a>).</p>
<h2 id="_vehicle-app_-characteristics"><em>Vehicle App</em> Characteristics</h2>
<p>The following aspects are important characteristics for <a href="#vehicle-apps"><em>Vehicle Apps</em></a>:</p>
<ul>
<li>
<p><strong>Code base:</strong>
Every <em>Vehicle App</em> is stored in its own repository. Tracked by version control, it can be deployed to multiple environments.</p>
</li>
<li>
<p><strong>Polyglot:</strong>
<em>Vehicle Apps</em> can be written in any programming language. System-level programming languages like Rust and C/C++ are particularly relevant for limited hardware resources found in vehicles, but higher-level languages like Python and JavaScript are also considered for special use cases.</p>
</li>
<li>
<p><strong>OCI-compliant containers:</strong>
<em>Vehicle Apps</em> are deployed as OCI-compliant containers. The size of these containers should be minimal to fit on constrained devices.</p>
</li>
<li>
<p><strong>Isolation:</strong>
Each <em>Vehicle App</em> should execute in its own process and should be self-contained with its interfaces and functionality exposed on its own port.</p>
</li>
<li>
<p><strong>Configurations:</strong>
Configuration information is separated from the code base of the <em>Vehicle App</em>, so that the same deployment can propagate across environments with their respective configuration applied.</p>
</li>
<li>
<p><strong>Disposability:</strong>
Favor fast startup and support graceful shutdowns to leave the system in a correct state.</p>
</li>
<li>
<p><strong>Observability:</strong>
<em>Vehicle Apps</em> provide traces, metrics and logs of every part of the application using <em>Open Telemetry</em>.</p>
</li>
<li>
<p><strong>Over-the-air update capability:</strong>
<em>Vehicle Apps</em> can be deployed via cloud backends like <a href="https://www.etas.com/en/products/pantaris-over-the-air-services.php" target="_blank" rel="noopener">Pantaris</a> and updated in vehicles frequently over the air through <a href="https://www.etas.com/en/support/webinars-nextgen-ota-updates-empowering-software-defined-vehicles-from-an-end-to-end-perspective.php" target="_blank" rel="noopener">NextGen OTA updates</a>.</p>
</li>
</ul>
<h2 id="development-process">Development Process</h2>
<p>The starting point for developing <a href="#vehicle-apps"><em>Vehicle Apps</em></a> is a <a href="#semantic-models">Semantic Model</a> of the vehicle data and vehicle services. Based on the Semantic Model, language-specific <a href="#vehicle-models">Vehicle Models</a> are generated. Vehicle Models are then distributed as packages to the respective package manager of the chosen programming language (e.g. pip, cargo, npm, &hellip;).</p>
<p>After a Vehicle Model is available for the chosen programming language, the <em>Vehicle App</em> can be developed using the generated Vehicle Model and its SDK.</p>
<p><img src="./build_procedure.png" alt="Development Process"></p>
<h2 id="further-information">Further information</h2>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-5e00cd625e8ebcb43adb8e1cc0e4286a">1.1 - Vehicle App SDK</h1>
    <div class="lead">Learn more about the provided <em>Vehicle App</em> SDK.</div>
	<h2 id="introduction">Introduction</h2>
<p>The <em>Vehicle App</em> SDK consists of the following building blocks:</p>
<ul>
<li>
<p><strong><a href="#vehicle-model-ontology">Vehicle Model Ontology</a>:</strong> The SDK provides a set of model base classes for the creation of vehicle models.</p>
</li>
<li>
<p><strong><a href="#middleware-integration">Middleware integration</a>:</strong> Vehicle Models can contain gRPC stubs to communicate with <em>Vehicle Services</em>. gRPC communication is integrated with the <a href="https://dapr.io" target="_blank" rel="noopener">Dapr</a> middleware for service discovery and <a href="https://opentelemetry.io" target="_blank" rel="noopener">OpenTelemetry</a> logging and tracing.</p>
</li>
<li>
<p><strong><a href="#fluent-query--rule-construction">Fluent query &amp; rule construction</a>:</strong> Based on a concrete Vehicle Model, the SDK is able to generate queries and rules against the KUKSA Data Broker to access the real values of the data points that are defined in the vehicle model.</p>
</li>
<li>
<p><strong><a href="#publish--subscribe-messaging">Publish &amp; subscribe messaging</a>:</strong> The SDK supports publishing messages to a MQTT broker and subscribing to topics of a MQTT broker.</p>
</li>
<li>
<p><strong><a href="#vehicle-app-abstraction">Vehicle App abstraction</a>:</strong> Last but not least the SDK provides a <code>VehicleApp</code> base class, which every <em>Vehicle App</em> derives from.</p>
</li>
</ul>
<p>An overview of the <em>Vehicle App</em> SDK and its dependencies is depicted in the following diagram:</p>
<p><img src="./sdk_overview.png" alt="SDK Overview"></p>
<h2 id="vehicle-model-ontology">Vehicle Model Ontology</h2>
<p>The Vehicle Model is a tree-based model where every branch in the tree, including the root, is derived from the <code>Model</code> base class provided by the SDK.</p>
<p>The Vehicle Model Ontology consists of the following classes:</p>
<h3 id="model">Model</h3>
<p>A model contains services, data points and other models. It corresponds to branch entries in VSS, interfaces in DTDL or namespaces in VSC.</p>
<h3 id="modelcollection">ModelCollection</h3>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Info</h4>

    The ModelCollection is deprecated since SDK v0.4.0. The generated vehicle model must reflect the actual representation of the data points. Please use the <em>Model</em> base class instead.

</div>

<p>Specifications like VSS support a concept that is called <a href="https://covesa.github.io/vehicle_signal_specification/rule_set/instances/" target="_blank" rel="noopener">Instances</a>. It makes it possible to describe repeating definitions. In DTDL, such kind of structures may be modeled with <a href="https://github.com/Azure/opendigitaltwins-dtdl/blob/master/DTDL/v2/DTDL.v2.md#relationship" target="_blank" rel="noopener">Relationships</a>. In the SDK, these structures are mapped with the <code>ModelCollection</code> class. A <code>ModelCollection</code> is a collection of models, which make it possible to reference an individual model either by a <code>NamedRange</code> (e.g., Row [1-3]), a <code>Dictionary</code> (e.g., &ldquo;Left&rdquo;, &ldquo;Right&rdquo;) or a combination of both.</p>
<h3 id="service">Service</h3>
<p>Direct asynchronous communication between <em>Vehicle Apps</em> and <em>Vehicle Services</em> is facilitated via the <a href="https://grpc.io" target="_blank" rel="noopener">gRPC</a> protocol.</p>
<p>The SDK has its own <code>Service</code> base class, which provides a convenience API layer to access the exposed methods of exactly one gRPC endpoint of a <em>Vehicle Service</em> or another <em>Vehicle App</em>. Please see the <a href="#middleware-integration">Middleware Integration</a> section for more details.</p>
<h3 id="datapoint">DataPoint</h3>
<p><code>DataPoint</code> is the base class for all data points. It corresponds to sensors/actuators/attributes in VSS or telemetry/properties in DTDL.</p>
<p>Data points are the signals that are typically emitted by <em>Vehicle Services</em> or <em>Data Providers</em>.</p>
<p>The representation of a data point is a path starting with the root model, e.g.:</p>
<ul>
<li><code>Vehicle.Speed</code></li>
<li><code>Vehicle.FuelLevel</code></li>
<li><code>Vehicle.Cabin.Seat.Row1.Pos1.Position</code></li>
</ul>
<p>Data points are defined as attributes of the model classes. The attribute name is the name of the data point without its path.</p>
<h3 id="typed-datapoint-classes">Typed DataPoint classes</h3>
<p>Every primitive datatype has a corresponding typed data point class, which is derived from <code>DataPoint</code> (e.g., <code>DataPointInt32</code>, <code>DataPointFloat</code>, <code>DataPointBool</code>, <code>DataPointString</code>, etc.).</p>
<h3 id="example">Example</h3>
<p>An example of a Vehicle Model created with the described ontology is shown below:</p>



<ul class="nav nav-tabs" id="tabs-1" role="tablist">
  <li class="nav-item">
      <a class="nav-link active persistLang-Python"
          id="tabs-01-00-tab" data-toggle="tab" href="#tabs-01-00" role="tab"
          onclick="persistLang(&#34;Python&#34;);"aria-controls="tabs-01-00" aria-selected="false">
        Python
      </a>
    </li><li class="nav-item">
      <a class="nav-link persistLang-C--"
          id="tabs-01-01-tab" data-toggle="tab" href="#tabs-01-01" role="tab"
          onclick="persistLang(&#34;C--&#34;);"aria-controls="tabs-01-01" aria-selected="false">
        C++
      </a>
    </li>
</ul>

<div class="tab-content" id="tabs-1-content">
    <div class="tab-pane fade show active"
        id="tabs-01-00" role="tabpanel" aria-labelled-by="tabs-01-00-tab">
        <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">## import ontology classes</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">sdv</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">DataPointDouble</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">Model</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">Service</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">DataPointInt32</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">DataPointBool</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">DataPointArray</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">DataPointString</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Seat</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Model</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">__init__</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">name</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">parent</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87">super</span><span style="color:#000;font-weight:bold">()</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">__init__</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">parent</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">name</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">name</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Position</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DataPointBool</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Position&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">IsOccupied</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DataPointBool</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;IsOccupied&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">IsBelted</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DataPointBool</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;IsBelted&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Height</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DataPointInt32</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Height&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Recline</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DataPointInt32</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Recline&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Cabin</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Model</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">__init__</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">name</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">parent</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87">super</span><span style="color:#000;font-weight:bold">()</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">__init__</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">parent</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">name</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">name</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">DriverPosition</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DataPointInt32</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;DriverPosition&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Seat</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">SeatCollection</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Seat&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">SeatCollection</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Model</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">__init__</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">name</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">parent</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87">super</span><span style="color:#000;font-weight:bold">()</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">__init__</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">parent</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">name</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">name</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Row1</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">RowType</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Row1&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Row2</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">RowType</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Row2&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">Row</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">index</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87">int</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">index</span> <span style="color:#ce5c00;font-weight:bold">&lt;</span> <span style="color:#0000cf;font-weight:bold">1</span> <span style="color:#204a87;font-weight:bold">or</span> <span style="color:#000">index</span> <span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">IndexError</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">f</span><span style="color:#4e9a06">&#34;Index </span><span style="color:#4e9a06">{</span><span style="color:#000">index</span><span style="color:#4e9a06">}</span><span style="color:#4e9a06"> is out of range&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">_options</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0000cf;font-weight:bold">1</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Row1</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0000cf;font-weight:bold">2</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Row2</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">_options</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">index</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">RowType</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Model</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">__init__</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">name</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">parent</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87">super</span><span style="color:#000;font-weight:bold">()</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">__init__</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">parent</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>            <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">name</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">name</span>
</span></span><span style="display:flex;"><span>            <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Pos1</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Seat</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Pos1&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>            <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Pos2</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Seat</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Pos2&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>            <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Pos3</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Seat</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Pos3&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">Pos</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">index</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87">int</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">index</span> <span style="color:#ce5c00;font-weight:bold">&lt;</span> <span style="color:#0000cf;font-weight:bold">1</span> <span style="color:#204a87;font-weight:bold">or</span> <span style="color:#000">index</span> <span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#0000cf;font-weight:bold">3</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">IndexError</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">f</span><span style="color:#4e9a06">&#34;Index </span><span style="color:#4e9a06">{</span><span style="color:#000">index</span><span style="color:#4e9a06">}</span><span style="color:#4e9a06"> is out of range&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">_options</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#0000cf;font-weight:bold">1</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Pos1</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#0000cf;font-weight:bold">2</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Pos2</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#0000cf;font-weight:bold">3</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Pos3</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">_options</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">index</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">VehicleIdentification</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Model</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">__init__</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">name</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">parent</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87">super</span><span style="color:#000;font-weight:bold">()</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">__init__</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">parent</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">name</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">name</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">VIN</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DataPointString</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;VIN&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Model</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DataPointString</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Model&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">CurrentLocation</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Model</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">__init__</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">name</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">parent</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87">super</span><span style="color:#000;font-weight:bold">()</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">__init__</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">parent</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">name</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">name</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Latitude</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DataPointDouble</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Latitude&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Longitude</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DataPointDouble</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Longitude&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Timestamp</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DataPointString</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Timestamp&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Altitude</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DataPointDouble</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Altitude&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Vehicle</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Model</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">__init__</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">name</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">parent</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87">super</span><span style="color:#000;font-weight:bold">()</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">__init__</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">parent</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">name</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">name</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Speed</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DataPointFloat</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Speed&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">CurrentLocation</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">CurrentLocation</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;CurrentLocation&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Cabin</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Cabin</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Cabin&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">vehicle</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Vehicle</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Vehicle&#34;</span><span style="color:#000;font-weight:bold">)</span></span></span></code></pre></div>
    </div>
    <div class="tab-pane fade"
        id="tabs-01-01" role="tabpanel" aria-labelled-by="tabs-01-01-tab">
        <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#include</span> <span style="color:#8f5902;font-style:italic">&#34;sdk/DataPoint.h&#34;</span><span style="color:#8f5902;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#include</span> <span style="color:#8f5902;font-style:italic">&#34;sdk/Model.h&#34;</span><span style="color:#8f5902;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">using</span> <span style="color:#204a87;font-weight:bold">namespace</span> <span style="color:#000">velocitas</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Seat</span> <span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">Model</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span><span style="color:#ce5c00;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">Seat</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#000">name</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">Model</span><span style="color:#ce5c00;font-weight:bold">*</span> <span style="color:#000">parent</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000">Model</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">name</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">parent</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">DataPointBoolean</span> <span style="color:#000">Position</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;Position&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">DataPointBoolean</span> <span style="color:#000">IsOccupied</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;IsOccupied&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">DataPointBoolean</span> <span style="color:#000">IsBelted</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;IsBelted&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">DataPointInt32</span> <span style="color:#000">Height</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;Height&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">DataPointInt32</span> <span style="color:#000">Recline</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;Recline&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">CurrentLocation</span> <span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">Model</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span><span style="color:#ce5c00;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">CurrentLocation</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Model</span><span style="color:#ce5c00;font-weight:bold">*</span> <span style="color:#000">parent</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000">Model</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;CurrentLocation&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">parent</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">DataPointDouble</span> <span style="color:#000">Latitude</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;Latitude&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">DataPointDouble</span> <span style="color:#000">Longitude</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;Longitude&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">DataPointString</span> <span style="color:#000">Timestamp</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;Timestamp&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">DataPointDouble</span> <span style="color:#000">Altitude</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;Altitude&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Cabin</span> <span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">Model</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span><span style="color:#ce5c00;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">SeatCollection</span> <span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">Model</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">public</span><span style="color:#ce5c00;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">RowType</span> <span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">Model</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">public</span><span style="color:#ce5c00;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">using</span> <span style="color:#000">Model</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">Model</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#000">Seat</span> <span style="color:#000">Pos1</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;Pos1&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000">Seat</span> <span style="color:#000">Pos2</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;Pos2&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">SeatCollection</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Model</span><span style="color:#ce5c00;font-weight:bold">*</span> <span style="color:#000">parent</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000">Model</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Seat&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">parent</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">RowType</span> <span style="color:#000">Row1</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;Row1&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">RowType</span> <span style="color:#000">Row2</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;Row2&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">Cabin</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Model</span><span style="color:#ce5c00;font-weight:bold">*</span> <span style="color:#000">parent</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000">Model</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Cabin&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">parent</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">DataPointInt32</span> <span style="color:#000">DriverPosition</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;DriverPosition&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">SeatCollection</span> <span style="color:#000">Seat</span><span style="color:#000;font-weight:bold">{</span><span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Vehicle</span> <span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">Model</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span><span style="color:#ce5c00;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">Vehicle</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000">Model</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Vehicle&#34;</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">DataPointFloat</span> <span style="color:#000">Speed</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;Speed&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">CurrentLocation</span> <span style="color:#000">CurrentLocation</span><span style="color:#000;font-weight:bold">{</span><span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">Cabin</span> <span style="color:#000">Cabin</span><span style="color:#000;font-weight:bold">{</span><span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">};</span></span></span></code></pre></div>
    </div>
</div>

<h2 id="middleware-integration">Middleware integration</h2>
<h3 id="grpc-services">gRPC Services</h3>
<p><em>Vehicle Services</em> are expected to expose their public endpoints over the gRPC protocol. The related protobuf definitions are used to generate method stubs for the Vehicle Model to make it possible to call the methods of the <em>Vehicle Services</em>.</p>
<h3 id="model-integration">Model integration</h3>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Info</h4>

    Please be aware that the integration of <em>Vehicle Services</em> into the overall model is not supported by <a href="/velocitas/docs/tutorials/vehicle_model_creation/automated_model_lifecycle/">automated model lifecycle</a>, currently.

</div>

<p>Based on the <code>.proto</code> files of the <em>Vehicle Services</em>, the protocol buffer compiler generates descriptors for all rpcs, messages, fields etc. for the target language.
The gRPC stubs are wrapped by a <strong>convenience layer</strong> class derived from <code>Service</code> that contains all the methods of the underlying protocol buffer specification.</p>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Info</h4>

    The convenience layer of C++ is a bit more extensive than in Python. The complexity of gRPC&rsquo;s async API is hidden behind individual <code>AsyncGrpcFacade</code> implementations which need to be implemented manually. Have a look at the <code>SeatService</code> of the <code>SeatAdjusterApp</code> example and its <code>SeatServiceAsyncGrpcFacade</code>.

</div>




<ul class="nav nav-tabs" id="tabs-4" role="tablist">
  <li class="nav-item">
      <a class="nav-link active persistLang-Python"
          id="tabs-04-00-tab" data-toggle="tab" href="#tabs-04-00" role="tab"
          onclick="persistLang(&#34;Python&#34;);"aria-controls="tabs-04-00" aria-selected="false">
        Python
      </a>
    </li><li class="nav-item">
      <a class="nav-link persistLang-C--"
          id="tabs-04-01-tab" data-toggle="tab" href="#tabs-04-01" role="tab"
          onclick="persistLang(&#34;C--&#34;);"aria-controls="tabs-04-01" aria-selected="false">
        C++
      </a>
    </li>
</ul>

<div class="tab-content" id="tabs-4-content">
    <div class="tab-pane fade show active"
        id="tabs-04-00" role="tabpanel" aria-labelled-by="tabs-04-00-tab">
        <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">SeatService</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Service</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">__init__</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87">super</span><span style="color:#000;font-weight:bold">()</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">__init__</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">_stub</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">SeatsStub</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">channel</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">async</span> <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">Move</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">seat</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">Seat</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">await</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">_stub</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Move</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">MoveRequest</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">seat</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">seat</span><span style="color:#000;font-weight:bold">),</span> <span style="color:#000">metadata</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">metadata</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">response</span></span></span></code></pre></div>
    </div>
    <div class="tab-pane fade"
        id="tabs-04-01" role="tabpanel" aria-labelled-by="tabs-04-01-tab">
        <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">SeatService</span> <span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">Service</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span><span style="color:#ce5c00;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">// nested classes/structs omitted
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">SeatService</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Model</span><span style="color:#ce5c00;font-weight:bold">*</span> <span style="color:#000">parent</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000">Service</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;SeatService&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">parent</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">,</span> <span style="color:#000">m_asyncGrpcFacade</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">grpc</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">CreateChannel</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;localhost:50051&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">grpc</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">InsecureChannelCredentials</span><span style="color:#000;font-weight:bold">()))</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">AsyncResultPtr_t</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">VoidResult</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">move</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Seat</span> <span style="color:#000">seat</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">auto</span> <span style="color:#000">asyncResult</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">make_shared</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">AsyncResult</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">VoidResult</span><span style="color:#ce5c00;font-weight:bold">&gt;&gt;</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">m_asyncGrpcFacade</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">Move</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">toGrpcSeat</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">seat</span><span style="color:#000;font-weight:bold">),</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">[</span><span style="color:#000">asyncResult</span><span style="color:#000;font-weight:bold">](</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#204a87;font-weight:bold">auto</span><span style="color:#ce5c00;font-weight:bold">&amp;</span> <span style="color:#000">reply</span><span style="color:#000;font-weight:bold">){</span> <span style="color:#000">asyncResult</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">insertResult</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">VoidResult</span><span style="color:#000;font-weight:bold">{})}),</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">[</span><span style="color:#000">asyncResult</span><span style="color:#000;font-weight:bold">](</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#204a87;font-weight:bold">auto</span><span style="color:#ce5c00;font-weight:bold">&amp;</span> <span style="color:#000">status</span><span style="color:#000;font-weight:bold">){</span> <span style="color:#000">asyncResult</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">insertError</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">toInternalStatus</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">status</span><span style="color:#000;font-weight:bold">))};</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">asyncResult</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">private</span><span style="color:#ce5c00;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">shared_ptr</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">SeatServiceAsyncGrpcFacade</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">m_asyncGrpcFacade</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">};</span></span></span></code></pre></div>
    </div>
</div>

<h3 id="service-discovery">Service discovery</h3>
<p>The underlying gRPC channel is provided and managed by the <code>Service</code> base class of the SDK. It is also responsible for routing the method invocation to the service through the Dapr middleware. As a result, a <code>dapr-app-id</code> has to be assigned to every <code>Service</code>, so that Dapr can discover the corresponding <em>Vehicle Services</em>. This <code>dapr-app-id</code> has to be specified as an environment variable named <code>&lt;service_name&gt;_DAPR_APP_ID</code>.</p>
<h2 id="fluent-query--rule-construction">Fluent query &amp; rule construction</h2>
<p>A set of query methods like <code>get()</code>, <code>where()</code>, <code>join()</code> etc. are provided through the <code>Model</code> and <code>DataPoint</code> base classes. These functions make it possible to construct SQL-like queries and subscriptions in a fluent language, which are then transmitted through the gRPC interface to the KUKSA Data Broker.</p>
<h3 id="query-examples">Query examples</h3>
<p>The following examples show you how to query data points.</p>
<h4 id="get-single-data-point">Get single data point</h4>



<ul class="nav nav-tabs" id="tabs-5" role="tablist">
  <li class="nav-item">
      <a class="nav-link active persistLang-Python"
          id="tabs-05-00-tab" data-toggle="tab" href="#tabs-05-00" role="tab"
          onclick="persistLang(&#34;Python&#34;);"aria-controls="tabs-05-00" aria-selected="false">
        Python
      </a>
    </li><li class="nav-item">
      <a class="nav-link persistLang-C--"
          id="tabs-05-01-tab" data-toggle="tab" href="#tabs-05-01" role="tab"
          onclick="persistLang(&#34;C--&#34;);"aria-controls="tabs-05-01" aria-selected="false">
        C++
      </a>
    </li>
</ul>

<div class="tab-content" id="tabs-5-content">
    <div class="tab-pane fade show active"
        id="tabs-05-00" role="tabpanel" aria-labelled-by="tabs-05-00-tab">
        <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#000">driver_pos</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87">int</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">vehicle</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Cabin</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">DriverPosition</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Call to broker</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># GetDataPoint(rule=&#34;SELECT Vehicle.Cabin.DriverPosition&#34;)</span></span></span></code></pre></div>
    </div>
    <div class="tab-pane fade"
        id="tabs-05-01" role="tabpanel" aria-labelled-by="tabs-05-01-tab">
        <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">auto</span> <span style="color:#000">driverPos</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">getDataPoints</span><span style="color:#000;font-weight:bold">({</span><span style="color:#000">Vehicle</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Cabin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">DriverPosition</span><span style="color:#000;font-weight:bold">})</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">await</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// Call to broker:
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// GetDataPoint(rule=&#34;SELECT Vehicle.Cabin.DriverPosition&#34;)
</span></span></span></code></pre></div>
    </div>
</div>

<h4 id="get-data-points-from-multiple-branches">Get data points from multiple branches</h4>

  

<ul class="nav nav-tabs" id="tabs-6" role="tablist">
  <li class="nav-item">
      <a class="nav-link active persistLang-Python"
          id="tabs-06-00-tab" data-toggle="tab" href="#tabs-06-00" role="tab"
          onclick="persistLang(&#34;Python&#34;);"aria-controls="tabs-06-00" aria-selected="false">
        Python
      </a>
    </li><li class="nav-item">
      <a class="nav-link persistLang-C--"
          id="tabs-06-01-tab" data-toggle="tab" href="#tabs-06-01" role="tab"
          onclick="persistLang(&#34;C--&#34;);"aria-controls="tabs-06-01" aria-selected="false">
        C++
      </a>
    </li>
</ul>

<div class="tab-content" id="tabs-6-content">
    <div class="tab-pane fade show active"
        id="tabs-06-00" role="tabpanel" aria-labelled-by="tabs-06-00-tab">
        <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#000">vehicle_data</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">vehicle</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">CurrentLocation</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Latitude</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">join</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">vehicle</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">CurrentLocation</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Longitude</span><span style="color:#000;font-weight:bold">)</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">print</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">f</span><span style="color:#4e9a06">&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">Latitude</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span><span style="color:#000">vehicle_data</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">CurrentLocation</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Latitude</span><span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">Longitude</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span><span style="color:#000">vehicle_data</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">CurrentLocation</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Longitude</span><span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#4e9a06">&#39;)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Call to broker</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># GetDataPoint(rule=&#34;SELECT Vehicle.CurrentLocation.Latitude, CurrentLocation.Longitude&#34;)</span></span></span></code></pre></div>
    </div>
    <div class="tab-pane fade"
        id="tabs-06-01" role="tabpanel" aria-labelled-by="tabs-06-01-tab">
        <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">auto</span> <span style="color:#000">datapoints</span> <span style="color:#ce5c00;font-weight:bold">=</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000">getDataPoints</span><span style="color:#000;font-weight:bold">({</span><span style="color:#000">Vehicle</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">CurrentLocation</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Latitude</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">Vehicle</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">CurrentLocation</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Longitude</span><span style="color:#000;font-weight:bold">})</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">await</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// Call to broker:
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// GetDataPoint(rule=&#34;SELECT Vehicle.CurrentLocation.Latitude, CurrentLocation.Longitude&#34;)
</span></span></span></code></pre></div>
    </div>
</div>

<h3 id="subscription-examples">Subscription examples</h3>
<h4 id="subscribe-and-unsubscribe-to-a-single-data-point">Subscribe and Unsubscribe to a single data point</h4>

  

<ul class="nav nav-tabs" id="tabs-7" role="tablist">
  <li class="nav-item">
      <a class="nav-link active persistLang-Python"
          id="tabs-07-00-tab" data-toggle="tab" href="#tabs-07-00" role="tab"
          onclick="persistLang(&#34;Python&#34;);"aria-controls="tabs-07-00" aria-selected="false">
        Python
      </a>
    </li><li class="nav-item">
      <a class="nav-link persistLang-C--"
          id="tabs-07-01-tab" data-toggle="tab" href="#tabs-07-01" role="tab"
          onclick="persistLang(&#34;C--&#34;);"aria-controls="tabs-07-01" aria-selected="false">
        C++
      </a>
    </li>
</ul>

<div class="tab-content" id="tabs-7-content">
    <div class="tab-pane fade show active"
        id="tabs-07-00" role="tabpanel" aria-labelled-by="tabs-07-00-tab">
        <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">rule</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">await</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">vehicle</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Cabin</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Seat</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Row</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">)</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Pos</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">)</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Position</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">subscribe</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">on_seat_position_change</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">on_seat_position_change</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">data</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">DataPointReply</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">position</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">data</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">vehicle</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Cabin</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Seat</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Row2</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Pos1</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Position</span><span style="color:#000;font-weight:bold">)</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">value</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87">print</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">f</span><span style="color:#4e9a06">&#39;Seat position changed to </span><span style="color:#4e9a06">{</span><span style="color:#000">position</span><span style="color:#4e9a06">}</span><span style="color:#4e9a06">&#39;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Call to broker</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Subscribe(rule=&#34;SELECT Vehicle.Cabin.Seat.Row2.Pos1.Position&#34;)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># If needed, the subscription can be stopped like this</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">await</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">rule</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">subscription</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">unsubscribe</span><span style="color:#000;font-weight:bold">()</span></span></span></code></pre></div>
    </div>
    <div class="tab-pane fade"
        id="tabs-07-01" role="tabpanel" aria-labelled-by="tabs-07-01-tab">
        <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">auto</span> <span style="color:#000">subscription</span> <span style="color:#ce5c00;font-weight:bold">=</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">subscribeDataPoints</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">velocitas</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">QueryBuilder</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">select</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Vehicle</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Cabin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Seat</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Row</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">Pos</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">Position</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">build</span><span style="color:#000;font-weight:bold">())</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">onItem</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">[</span><span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">](</span><span style="color:#204a87;font-weight:bold">auto</span><span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> <span style="color:#000">item</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span> <span style="color:#000">onSeatPositionChanged</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">forward</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">decltype</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">item</span><span style="color:#000;font-weight:bold">)</span><span style="color:#ce5c00;font-weight:bold">&gt;</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">item</span><span style="color:#000;font-weight:bold">));</span> <span style="color:#000;font-weight:bold">});</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// If needed, the subscription can be stopped like this:
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">subscription</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">cancel</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">onSeatPositionChanged</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">DataPointMap_t</span> <span style="color:#000">datapoints</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">logger</span><span style="color:#000;font-weight:bold">().</span><span style="color:#000">info</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;SeatPosition has changed to: &#34;</span><span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">datapoints</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">at</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Vehicle</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Cabin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Seat</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Row</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">Pos</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">Position</span><span style="color:#000;font-weight:bold">)</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">asFloat</span><span style="color:#000;font-weight:bold">().</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span></span></span></code></pre></div>
    </div>
</div>

<h4 id="subscribe-to-a-single-data-point-with-a-filter">Subscribe to a single data point with a filter</h4>



<ul class="nav nav-tabs" id="tabs-8" role="tablist">
  <li class="nav-item">
      <a class="nav-link active persistLang-Python"
          id="tabs-08-00-tab" data-toggle="tab" href="#tabs-08-00" role="tab"
          onclick="persistLang(&#34;Python&#34;);"aria-controls="tabs-08-00" aria-selected="false">
        Python
      </a>
    </li><li class="nav-item">
      <a class="nav-link persistLang-C--"
          id="tabs-08-01-tab" data-toggle="tab" href="#tabs-08-01" role="tab"
          onclick="persistLang(&#34;C--&#34;);"aria-controls="tabs-08-01" aria-selected="false">
        C++
      </a>
    </li>
</ul>

<div class="tab-content" id="tabs-8-content">
    <div class="tab-pane fade show active"
        id="tabs-08-00" role="tabpanel" aria-labelled-by="tabs-08-00-tab">
        <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#000">Vehicle</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Cabin</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Seat</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Row</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">)</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Pos</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">)</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Position</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">where</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>    <span style="color:#4e9a06">&#34;Cabin.Seat.Row2.Pos1.Position &gt; 50&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">subscribe</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">on_seat_position_change</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">on_seat_position_change</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">data</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">DataPointReply</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">position</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">data</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Vehicle</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Cabin</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Seat</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Row2</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Pos1</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Position</span><span style="color:#000;font-weight:bold">)</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">value</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87">print</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">f</span><span style="color:#4e9a06">&#39;Seat position changed to </span><span style="color:#4e9a06">{</span><span style="color:#000">position</span><span style="color:#4e9a06">}</span><span style="color:#4e9a06">&#39;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Call to broker</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Subscribe(rule=&#34;SELECT Vehicle.Cabin.Seat.Row2.Pos1.Position WHERE Vehicle.Cabin.Seat.Row2.Pos1.Position &gt; 50&#34;)</span></span></span></code></pre></div>
    </div>
    <div class="tab-pane fade"
        id="tabs-08-01" role="tabpanel" aria-labelled-by="tabs-08-01-tab">
        <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">auto</span> <span style="color:#000">query</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">QueryBuilder</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">select</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Vehicle</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Cabin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Seat</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Row</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">Pos</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">Position</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">.</span><span style="color:#000">where</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">vehicle</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Cabin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Seat</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Row</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">Pos</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">Position</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">.</span><span style="color:#000">gt</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">50</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">.</span><span style="color:#000">build</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">subscribeDataPoints</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">query</span><span style="color:#000;font-weight:bold">)</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">onItem</span><span style="color:#000;font-weight:bold">([</span><span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">](</span><span style="color:#204a87;font-weight:bold">auto</span><span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> <span style="color:#000">item</span><span style="color:#000;font-weight:bold">){</span><span style="color:#000">onSeatPositionChanged</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">forward</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">decltype</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">item</span><span style="color:#000;font-weight:bold">)</span><span style="color:#ce5c00;font-weight:bold">&gt;</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">item</span><span style="color:#000;font-weight:bold">));}));</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">onSeatPositionChanged</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">DataPointMap_t</span> <span style="color:#000">datapoints</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">logger</span><span style="color:#000;font-weight:bold">().</span><span style="color:#000">info</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;SeatPosition has changed to: &#34;</span><span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">datapoints</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">at</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Vehicle</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Cabin</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Seat</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Row</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">Pos</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">Position</span><span style="color:#000;font-weight:bold">)</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">asFloat</span><span style="color:#000;font-weight:bold">().</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// Call to broker:
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// Subscribe(rule=&#34;SELECT Vehicle.Cabin.Seat.Row2.Pos1.Position WHERE Vehicle.Cabin.Seat.Row2.Pos1.Position &gt; 50&#34;)
</span></span></span></code></pre></div>
    </div>
</div>

<h2 id="publish--subscribe-messaging">Publish &amp; subscribe messaging</h2>
<p>The SDK supports publishing messages to a MQTT broker and subscribing to topics of a MQTT broker. By leveraging the Dapr pub/sub building block for this purpose, the low-level MQTT communication is abstracted away from the <em>Vehicle App</em> developer. Especially the physical address and port of the MQTT broker is no longer configured in the <em>Vehicle App</em> itself, but rather is part of the Dapr configuration, which is outside of the <em>Vehicle App</em>.</p>
<h3 id="publish-mqtt-messages">Publish MQTT Messages</h3>
<p>MQTT messages can be published easily with the <code>publish_mqtt_event()</code> method, inherited from <code>VehicleApp</code> base class:</p>



<ul class="nav nav-tabs" id="tabs-9" role="tablist">
  <li class="nav-item">
      <a class="nav-link active persistLang-Python"
          id="tabs-09-00-tab" data-toggle="tab" href="#tabs-09-00" role="tab"
          onclick="persistLang(&#34;Python&#34;);"aria-controls="tabs-09-00" aria-selected="false">
        Python
      </a>
    </li><li class="nav-item">
      <a class="nav-link persistLang-C--"
          id="tabs-09-01-tab" data-toggle="tab" href="#tabs-09-01" role="tab"
          onclick="persistLang(&#34;C--&#34;);"aria-controls="tabs-09-01" aria-selected="false">
        C++
      </a>
    </li>
</ul>

<div class="tab-content" id="tabs-9-content">
    <div class="tab-pane fade show active"
        id="tabs-09-00" role="tabpanel" aria-labelled-by="tabs-09-00-tab">
        <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">await</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">publish_mqtt_event</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>    <span style="color:#4e9a06">&#34;seatadjuster/currentPosition&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">json</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">dumps</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">req_data</span><span style="color:#000;font-weight:bold">))</span></span></span></code></pre></div>
    </div>
    <div class="tab-pane fade"
        id="tabs-09-01" role="tabpanel" aria-labelled-by="tabs-09-01-tab">
        <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#000">publishToTopic</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;seatadjuster/currentPosition&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;{ </span><span style="color:#4e9a06">\&#34;</span><span style="color:#4e9a06">position</span><span style="color:#4e9a06">\&#34;</span><span style="color:#4e9a06">: 40 }&#34;</span><span style="color:#000;font-weight:bold">);</span></span></span></code></pre></div>
    </div>
</div>

<h3 id="subscribe-to-mqtt-topics">Subscribe to MQTT Topics</h3>
<p>In Python subscriptions to MQTT topics can be easily established with the <code>subscribe_topic()</code> annotation. The annotation needs to be applied to a method of the <code>VehicleApp</code> base class. In C++ the <code>subscribeToTopic()</code> method has to be called. Callbacks for <code>onItem</code> and <code>onError</code> can be set. The following examples provide some more details.</p>



<ul class="nav nav-tabs" id="tabs-10" role="tablist">
  <li class="nav-item">
      <a class="nav-link active persistLang-Python"
          id="tabs-10-00-tab" data-toggle="tab" href="#tabs-10-00" role="tab"
          onclick="persistLang(&#34;Python&#34;);"aria-controls="tabs-10-00" aria-selected="false">
        Python
      </a>
    </li><li class="nav-item">
      <a class="nav-link persistLang-C--"
          id="tabs-10-01-tab" data-toggle="tab" href="#tabs-10-01" role="tab"
          onclick="persistLang(&#34;C--&#34;);"aria-controls="tabs-10-01" aria-selected="false">
        C++
      </a>
    </li>
</ul>

<div class="tab-content" id="tabs-10-content">
    <div class="tab-pane fade show active"
        id="tabs-10-00" role="tabpanel" aria-labelled-by="tabs-10-00-tab">
        <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@subscribe_topic</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;seatadjuster/setPosition/request&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">async</span> <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">on_set_position_request_received</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">data</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87">str</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span> <span style="color:#204a87;font-weight:bold">None</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">data</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">json</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">loads</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">data</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">logger</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">info</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Set Position Request received: data=</span><span style="color:#4e9a06">%s</span><span style="color:#4e9a06">&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">data</span><span style="color:#000;font-weight:bold">)</span></span></span></code></pre></div>
    </div>
    <div class="tab-pane fade"
        id="tabs-10-01" role="tabpanel" aria-labelled-by="tabs-10-01-tab">
        <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#include</span> <span style="color:#8f5902;font-style:italic">&lt;fmt/core.h&gt;</span><span style="color:#8f5902;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#include</span> <span style="color:#8f5902;font-style:italic">&lt;nlohmann/json.hpp&gt;</span><span style="color:#8f5902;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#000">subscribeToTopic</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;seatadjuster/setPosition/request&#34;</span><span style="color:#000;font-weight:bold">)</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">onItem</span><span style="color:#000;font-weight:bold">([</span><span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">](</span><span style="color:#204a87;font-weight:bold">auto</span><span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> <span style="color:#000">item</span><span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#204a87;font-weight:bold">auto</span> <span style="color:#000">jsonData</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">nlohmann</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">json</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">parse</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">item</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">logger</span><span style="color:#000;font-weight:bold">().</span><span style="color:#000">info</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">fmt</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">format</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Set Position Request received: data={}&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">jsonData</span><span style="color:#000;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">});</span></span></span></code></pre></div>
    </div>
</div>

<p>Under the hood, the <em>Vehicle App</em> creates a gRPC endpoint on port <code>50008</code>, which is exposed to the Dapr middleware. The Dapr middleware will then subscribe to the MQTT broker and forward the messages to the <em>Vehicle App</em>.</p>
<p>To change the app port, set it in the <code>main()</code> method of the app:</p>



<ul class="nav nav-tabs" id="tabs-11" role="tablist">
  <li class="nav-item">
      <a class="nav-link active persistLang-Python"
          id="tabs-11-00-tab" data-toggle="tab" href="#tabs-11-00" role="tab"
          onclick="persistLang(&#34;Python&#34;);"aria-controls="tabs-11-00" aria-selected="false">
        Python
      </a>
    </li><li class="nav-item">
      <a class="nav-link persistLang-C--"
          id="tabs-11-01-tab" data-toggle="tab" href="#tabs-11-01" role="tab"
          onclick="persistLang(&#34;C--&#34;);"aria-controls="tabs-11-01" aria-selected="false">
        C++
      </a>
    </li>
</ul>

<div class="tab-content" id="tabs-11-content">
    <div class="tab-pane fade show active"
        id="tabs-11-00" role="tabpanel" aria-labelled-by="tabs-11-00-tab">
        <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">sdv</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">conf</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">async</span> <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">():</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">conf</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">DAPR_APP_PORT</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">your</span> <span style="color:#000">port</span><span style="color:#ce5c00;font-weight:bold">&gt;</span></span></span></code></pre></div>
    </div>
    <div class="tab-pane fade"
        id="tabs-11-01" role="tabpanel" aria-labelled-by="tabs-11-01-tab">
        <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// C++ does not use Dapr for Pub/Sub messaging at this point
</span></span></span></code></pre></div>
    </div>
</div>

<h2 id="vehicle-app-abstraction">Vehicle App abstraction</h2>
<p><em>Vehicle Apps</em> are inherited from the <code>VehicleApp</code> base class. This enables the <em>Vehicle App</em> to use the Publish &amp; Subscribe messaging and to connect to the KUKSA Data Broker.</p>
<p>The <code>Vehicle Model</code> instance is passed to the constructor of the <code>VehicleApp</code> class and should be stored in a member variable (e.g. <code>self.vehicle</code> for Python, <code>std::shared_ptr&lt;Vehicle&gt; m_vehicle;</code> for C++), to be used by all methods within the application.</p>
<p>Finally, the <code>run()</code> method of the <code>VehicleApp</code> class is called to start the <em>Vehicle App</em> and register all MQTT topic and Data Broker subscriptions.</p>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Implementation detail</h4>

    In Python, the subscriptions are based on <code>asyncio</code>, which makes it necessary to call the <code>run()</code> method with an active <code>asyncio event_loop</code>.

</div>

<p>A typical skeleton of a <em>Vehicle App</em> looks like this:</p>



<ul class="nav nav-tabs" id="tabs-13" role="tablist">
  <li class="nav-item">
      <a class="nav-link active persistLang-Python"
          id="tabs-13-00-tab" data-toggle="tab" href="#tabs-13-00" role="tab"
          onclick="persistLang(&#34;Python&#34;);"aria-controls="tabs-13-00" aria-selected="false">
        Python
      </a>
    </li><li class="nav-item">
      <a class="nav-link persistLang-C--"
          id="tabs-13-01-tab" data-toggle="tab" href="#tabs-13-01" role="tab"
          onclick="persistLang(&#34;C--&#34;);"aria-controls="tabs-13-01" aria-selected="false">
        C++
      </a>
    </li>
</ul>

<div class="tab-content" id="tabs-13-content">
    <div class="tab-pane fade show active"
        id="tabs-13-00" role="tabpanel" aria-labelled-by="tabs-13-00-tab">
        <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">SeatAdjusterApp</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">VehicleApp</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">__init__</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">vehicle</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">Vehicle</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87">super</span><span style="color:#000;font-weight:bold">()</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">__init__</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">vehicle</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">vehicle</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">async</span> <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">():</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic"># Main function</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">logger</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">info</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Starting seat adjuster app...&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">seat_adjuster_app</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">SeatAdjusterApp</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">vehicle</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">await</span> <span style="color:#000">seat_adjuster_app</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">run</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">LOOP</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">asyncio</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get_event_loop</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span><span style="color:#000">LOOP</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">add_signal_handler</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">signal</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">SIGTERM</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">LOOP</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">stop</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000">LOOP</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">run_until_complete</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">main</span><span style="color:#000;font-weight:bold">())</span>
</span></span><span style="display:flex;"><span><span style="color:#000">LOOP</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">close</span><span style="color:#000;font-weight:bold">()</span></span></span></code></pre></div>
    </div>
    <div class="tab-pane fade"
        id="tabs-13-01" role="tabpanel" aria-labelled-by="tabs-13-01-tab">
        <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#include</span> <span style="color:#8f5902;font-style:italic">&#34;sdk/VehicleApp.h&#34;</span><span style="color:#8f5902;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#include</span> <span style="color:#8f5902;font-style:italic">&#34;vehicle/Vehicle.hpp&#34;</span><span style="color:#8f5902;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">using</span> <span style="color:#204a87;font-weight:bold">namespace</span> <span style="color:#000">velocitas</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">SeatAdjusterApp</span> <span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">VehicleApp</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span><span style="color:#ce5c00;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">SeatAdjusterApp</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000">VehicleApp</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">IVehicleDataBrokerClient</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">createInstance</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;vehicledatabroker&#34;</span><span style="color:#000;font-weight:bold">)),</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">IPubSubClient</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">createInstance</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;localhost:1883&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;SeatAdjusterApp&#34;</span><span style="color:#000;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">{}</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">private</span><span style="color:#ce5c00;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">Vehicle</span> <span style="color:#000">Vehicle</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">argc</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">char</span><span style="color:#ce5c00;font-weight:bold">**</span> <span style="color:#000">argv</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">SeatAdjusterApp</span> <span style="color:#000">app</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">app</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">run</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span></span></span></code></pre></div>
    </div>
</div>

<h2 id="further-information">Further information</h2>
<ul>
<li>Tutorial: <a href="/velocitas/docs/tutorials/quickstart.md">Quickstart</a></li>
<li>Tutorial: <a href="/velocitas/docs/tutorials/vehicle_model_creation">Vehicle Model Creation</a></li>
<li>Tutorial: <a href="/velocitas/docs/tutorials/vehicle_app_development"><em>Vehicle App</em> Development</a></li>
<li>Tutorial: <a href="/velocitas/docs/tutorials/vehicle_app_development/integration_tests">Develop and run integration tests for a <em>Vehicle App</em></a></li>
</ul>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-56b42987d464402649a2b538a1b4da6e">1.2 - Vehicle Abstraction Layer (VAL)</h1>
    <div class="lead">Learn about the main concepts and components of the vehicle abstraction and how it relates to the <a href="https://www.eclipse.org/kuksa/" target="_blank" rel="noopener">Eclipse KUKSA project</a>.</div>
	<h2 id="introduction">Introduction</h2>
<p>The Vehicle Abstraction Layer (VAL) enables access to the systems and functions of a vehicle via a unified - or even better - a standardized <em>Vehicle API</em> abstracting from the details of the end-to-end architecture of the vehicle. The unified API enables <em>Vehicle Apps</em> to run on different vehicle architectures of a single OEM. <em>Vehicle Apps</em> can be even implemented OEM-agnostic, if using an API based on a standard like the <a href="https://covesa.github.io/vehicle_signal_specification/" target="_blank" rel="noopener">COVESA Vehicle Signal Specification (VSS)</a>.
The <em>Vehicle API</em> eliminates the need to know the source, destination, and format of signals for the vehicle system.</p>
<p>The Eclipse Velocitas project is using the VAL of the <a href="https://www.eclipse.org/kuksa/" target="_blank" rel="noopener"><em>Eclipse KUKSA project</em></a>, also called <em>KUKSA.VAL</em>.
KUKSA.VAL does not provide a concrete VAL. That&rsquo;s up to you as an OEM (vehicle manufacturer) or as a supplier.
But KUKSA.VAL provides the components and tools that helps you to implement a VAL for your chosen end-to-end architecture. Also, it can support you to simulate the vehicle hardware during the development phase of an <em>Vehicle App</em> or Service.</p>
<p>KUKSA.VAL provides you with ready-to-use generic components for the signal-based access to the vehicle, like the <em>KUKSA Data Broker</em> and the generic <em>Data Providers</em> (aka <em>Data Feeders</em>).
It also provides you reference implementations of certain <em>Vehicle Services</em>, like the <em>Seat Service</em> and the <em>HVAC Service</em>.</p>
<h2 id="architecture">Architecture</h2>
<p>The image below shows the main components of the VAL and its relation to the <a href="/velocitas/docs/concepts/development_model.md">Velocitas Development Model</a>.</p>
<p><img src="./val_overview.drawio.svg" alt="Overview of the VAL architecture"></p>
<h3 id="kuksa-data-broker-aka-vehicle-data-broker">KUKSA Data Broker (aka Vehicle Data Broker)</h3>
<p>The <a href="https://github.com/eclipse/kuksa.val/tree/master/kuksa_databroker" target="_blank" rel="noopener">KUKSA Data Broker</a> is a gRPC service acting as a broker of vehicle data / signals also called <em>data points</em> in the following.
It provides central access to vehicle data points arranged in a - preferably standardized - vehicle data model like the COVESA VSS or others. But this is not a must, it is also possible to use your own (proprietary) vehicle model or to extend the COVESA VSS with your specific extensions via <a href="https://covesa.github.io/vehicle_signal_specification/rule_set/overlay/" target="_blank" rel="noopener">VSS <em>overlays</em></a>.</p>
<p>Data points represent certain states of a vehicle, like the current vehicle speed or the currently applied gear. Data points can represent sensor values like the vehicle speed or engine temperature, actuators like the wiper mode, and immutable attributes of the vehicle like the needed fuel type(s) of the vehicle, engine displacement, maximum power, etc.</p>
<p>Data points factually belonging together are typically arranged in branches and sub-branches of a tree structure (like <a href="https://covesa.github.io/vehicle_signal_specification/introduction/overview/#example" target="_blank" rel="noopener">this example</a> on the COVESA VSS site).</p>
<p>The KUKSA Data Broker is implemented in Rust, can run in a container and provides services to get data points, update data points and for subscribing to automatic notifications on data point changes.
Filter- and rule-based subscriptions of data points can be used to reduce the number of updates sent to the subscriber.</p>
<h3 id="data-providers--data-feeders">Data Providers / Data Feeders</h3>
<p>Conceptually, a data provider is the responsible to take care for a certain set of data points: It provides updates of sensor data from the vehicle to the data broker and forwards updates of actuator values to the vehicle. The set of data points a data provider maintains may depend on the network interface (e.g. CAN bus) via that those data is accessible or it can depend on a certain use case the provider is responsible for (like seat control).</p>
<p>Eclipse KUKSA provides several <em>generic</em> <a href="https://github.com/eclipse/kuksa.val.feeders" target="_blank" rel="noopener"><em>Data Providers</em></a> for different datasources.
As of today, Eclipse Velocitas only utilizes the generic <a href="https://github.com/eclipse/kuksa.val.feeders/tree/main/dbc2val" target="_blank" rel="noopener">CAN feeder (KUKSA DBC Feeder)</a> implemented in Python, which reads data from a CAN bus based on mappings specified in e.g. a CAN network description (dbc) file.
The feeder uses a mapping file and data point metadata to convert the source data to data points and injects them into the data broker using its <code>Collector</code> gRPC interface.
The feeder automatically reconnects to the data broker in the event that the connection is lost.</p>
<h3 id="vehicle-services">Vehicle Services</h3>
<p>A vehicle service offers a <em>Vehicle App</em> to interact with the vehicle systems on a RPC-like basis.
It can provide service interfaces to control actuators or to trigger (complex) actions, or provide interfaces to get data.
It communicates with the Hardware Abstraction to execute the underlying services, but may also interact with the data broker.</p>
<p>The <a href="https://github.com/eclipse/kuksa.val.services/" target="_blank" rel="noopener">KUKSA.VAL Services repository</a> contains examples illustrating how such kind of vehicle services can be built.</p>
<h3 id="hardware-abstraction">Hardware Abstraction</h3>
<p>Data feeders rely on hardware abstraction. Hardware abstraction is project/platform specific.
The reference implementation relies on <strong>SocketCAN</strong> and <strong>vxcan</strong>, see <a href="https://github.com/eclipse/kuksa.val.feeders/tree/main/dbc2val" target="_blank" rel="noopener">kuksa.val.feeders</a>.
The hardware abstraction may offer replaying (e.g., CAN) data from a file (can dump file) when the respective data source (e.g., CAN) is not available.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 810px">
	<img class="card-img-top" src="/velocitas/docs/concepts/development_model/val/val_architecture_hue12a1c2ecc85cf3ee9799265a093472d_127432_800x0_resize_catmullrom_3.png" width="800" height="614">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
  Overview of the VAL architecture
</p>
	</figcaption>
	
</figure>

<h2 id="information-flow">Information Flow</h2>
<p>The VAL offers an information flow between vehicle networks and vehicle services.
The data that can flow is ultimately limited to the data available through the Hardware Abstraction, which is platform/project-specific.
The KUKSA Data Broker offers read/subscribe access to data points based on a gRPC service. The data points which are actually available are defined by the set of feeders providing the data into the broker.
Services (like the <a href="https://github.com/eclipse/kuksa.val.services/tree/main/seat_service" target="_blank" rel="noopener">seat service</a>) define which CAN signals they listen to and which CAN signals they send themselves, see <a href="https://github.com/eclipse/kuksa.val.services/blob/main/seat_service/src/lib/seat_adjuster/seat_controller/README.md" target="_blank" rel="noopener">documentation</a>.
Service implementations may also interact as feeders with the data broker.</p>
<h3 id="data-flow-when-a-_vehicle-app_-uses-the-kuksa-data-broker">Data flow when a <em>Vehicle App</em> uses the KUKSA Data Broker</h3>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 810px">
	<img class="card-img-top" src="/velocitas/docs/concepts/development_model/val/dataflow_broker_hu042a46cff9fdb3ae953ce2b4baa695f0_25200_800x0_resize_catmullrom_3.png" width="800" height="122">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
  Architectural representation of the KUKSA data broker data flow
</p>
	</figcaption>
	
</figure>

<h3 id="data-flow-when-a-_vehicle-app_-uses-a-vehicle-service">Data flow when a <em>Vehicle App</em> uses a Vehicle Service</h3>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 810px">
	<img class="card-img-top" src="/velocitas/docs/concepts/development_model/val/dataflow_service_hu2c631cbebd9c8512318cb5903df1828b_24831_800x0_resize_catmullrom_3.png" width="800" height="130">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
  Architectural representation of the vehicle service data flow
</p>
	</figcaption>
	
</figure>

<h2 id="source-code">Source Code</h2>
<p>Source code and build instructions are available in the respective KUKSA.VAL repositories:</p>
<ul>
<li><a href="https://github.com/eclipse/kuksa.val/tree/master/kuksa_databroker" target="_blank" rel="noopener">KUKSA Data Broker</a></li>
<li><a href="https://github.com/eclipse/kuksa.val.feeders/tree/main/dbc2val" target="_blank" rel="noopener">KUKSA DBC Feeder</a></li>
<li><a href="https://github.com/eclipse/kuksa.val.services/" target="_blank" rel="noopener">KUKSA example services</a></li>
</ul>
<h2 id="guidelines">Guidelines</h2>
<ul>
<li>Guidelines for best practices on how to specify a gRPC-based service interface and on how to implement a vehicle service can be found in the <a href="https://github.com/eclipse/kuksa.val.services/tree/main/docs" target="_blank" rel="noopener">kuksa.val.services repository</a>.</li>
</ul>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-e8c9a8068d61f8d591fb113a53a16f27">1.3 - Vehicle App Manifest</h1>
    <div class="lead">Learn more about the <em>Vehicle App</em> Manifest.</div>
	<h2 id="versions">Versions</h2>
<ul>
<li>v1</li>
<li>v2</li>
<li><strong>v3 (current)</strong></li>
</ul>
<h2 id="introduction">Introduction</h2>
<p>The <em>AppManifest</em> defines the properties of your <em>Vehicle App</em> and its <em>functional interfaces</em> (<strong>FIs</strong>).</p>
<p><strong>FIs</strong> may be:</p>
<ul>
<li>required service interfaces (e.g. a required gRPC service interface)</li>
<li>the used vehicle model and accessed data points.</li>
<li>an arbitrary abstract interface description used by 3rd parties</li>
</ul>
<p>In addition to <em>required</em> <strong>FIs</strong>, <em>provided</em> <strong>FIs</strong> can (and need) to be specified as well.</p>
<p>These defined interfaces are then used by the Velocitas toolchain to:</p>
<ul>
<li>generate service stubs for either a client implementation (required IF) or a server implementation (provided IF) (i.e. for gRPC)</li>
<li>generate a source code equivalent of the defined vehicle model</li>
</ul>
<h2 id="overview">Overview</h2>
<p>The image below depicts the interaction between <em>App Manifest</em> and <em>DevEnv Configuration</em> at -development time- The responsibilities are clearly separated; the <em>App Manifest</em> describes the application and its interfaces whereas <em>DevEnv Configuration</em> (or <code>.velocitas.json</code>) defines the configuration of the development environment and all the packages used by the Velocitas toolchain.</p>
<p><img src="./new_app_manifest_overview.drawio.svg" alt="Overview"></p>
<h2 id="context">Context</h2>
<p>To fully understand the <em>AppManifest</em>, let&rsquo;s have a look at <strong>who</strong> interacts with it:</p>
<p><img src="./manifest_context.drawio.png" alt="Manifest Context"></p>
<h2 id="purpose">Purpose</h2>
<ul>
<li>Define the requirements of a <em>Vehicle App</em> in an <strong>abstract way</strong> to avoid dependencies on concrete <em>Runtime</em> and <em>Middleware</em> configurations.</li>
<li>Description of your applications <strong>functional interfaces</strong>(VehicleModel, services, APIs, &hellip;)</li>
<li>Enable <strong>loose coupling</strong> of functional interface descriptions and the Velocitas toolchain. Some parts of the toolchain are responsible for reading the file and acting upon it, depending on the type of functional interface</li>
<li>Providing an <strong>extendable</strong> syntax to enable custom functional interface types which may not provided by the Velocitas toolchain itself, but by a third party</li>
<li>Providing a <strong>single source of truth</strong> for generation of deployment specifications (i.e. Helm-Charts, Kanto spec, etc&hellip;)</li>
</ul>
<h2 id="example">Example</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// AppManifest.json
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;manifestVersion&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;v3&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;name&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;SampleApp&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;interfaces&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;type&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;vehicle-signal-interface&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;config&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;src&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;https://github.com/COVESA/vehicle_signal_specification/releases/download/v3.0/vss_rel_3.0.json&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;datapoints&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;required&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;path&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Vehicle.Speed&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;optional&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;true&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;access&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;read&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;provided&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;path&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Vehicle.Cabin.Seat.Row1.Pos1.Position&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;type&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;grpc-interface&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;config&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;src&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;https://raw.githubusercontent.com/eclipse/kuksa.val.services/main/seat_service/proto/sdv/edge/comfort/seats/v1/seats.proto&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;required&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;methods&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span> <span style="color:#4e9a06">&#34;Move&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;MoveComponent&#34;</span> <span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;type&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;pubsub&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;config&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;reads&#34;</span><span style="color:#000;font-weight:bold">:</span>  <span style="color:#000;font-weight:bold">[</span> <span style="color:#4e9a06">&#34;sampleapp/getSpeed&#34;</span> <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;writes&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span> <span style="color:#4e9a06">&#34;sampleapp/currentSpeed&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;sampleapp/getSpeed/response&#34;</span> <span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>The <em>VehicleApp</em> above has an:</p>
<ul>
<li>
<p>interface towards our generated Vehicle Signal Interface based on the <a href="https://github.com/COVESA/vehicle_signal_specification" target="_blank" rel="noopener">COVESA Vehicle Signal Specification</a>. In particular, it requires read access to the vehicle signal <code>Vehicle.Speed</code> since the signal is marked as <em>optional</em> the application will work, even if the signal is not present in the system. Additionally, the application acts as a provider for the signal <code>Vehicle.Cabin.Seat.Row1.Pos1.Position</code> meaning that it will take responsibility of reading/writing data directly to vehicle networks for the respective signal.</p>
</li>
<li>
<p>interface towards gRPC based on the <code>seats.proto</code> file. Since the <code>direction</code> is <code>required</code> a service client for the <code>seats</code> service will be generated who interacts with the Velocitas middleware.</p>
</li>
<li>
<p>interface towards the <code>pubsub</code> middleware and is reading to the topic <code>sampleapp/getSpeed</code> and writing the topics <code>sampleapp/currentSpeed</code>, <code>sampleapp/getSpeed/response</code>.</p>
</li>
</ul>
<p>The example has no provided interfaces.</p>
<h2 id="structure">Structure</h2>
<p>Describes all external properties and interfaces of a Vehicle Application.</p>
<h3 id="properties">Properties</h3>





<table class="table table-bordered">
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>manifestVersion</code></td>
<td>string</td>
<td><strong>Yes</strong></td>
<td>The version of the App Manifest.</td>
</tr>
<tr>
<td><code>name</code></td>
<td>string</td>
<td><strong>Yes</strong></td>
<td>The name of the Vehicle Application.</td>
</tr>
<tr>
<td><code>interfaces</code></td>
<td><a href="#interfaces">object</a>[]</td>
<td>No</td>
<td>Array of all provided or required functional interfaces.</td>
</tr>
</tbody>
</table>


<h3 id="interfaces">Interfaces</h3>
<h4 id="properties-1">Properties</h4>





<table class="table table-bordered">
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>type</code></td>
<td>string</td>
<td><strong>Yes</strong></td>
<td>The type of the functional interface.</td>
</tr>
<tr>
<td><code>config</code></td>
<td><a href="#config">object</a></td>
<td>No</td>
<td>The configuration of the functional interface type. Content may vary between all types.</td>
</tr>
</tbody>
</table>


<h4 id="config">Config</h4>
<p>The configuration of the functional interface type. Content may vary between all types.</p>
<p>Refer to the <a href="https://json-schema.org/" target="_blank" rel="noopener">JSON Schema</a> of the current <em>AppManifest</em> <a href="./manifest.v3.schema.json">here</a>.</p>
<h3 id="visualization">Visualization</h3>
<div class="mermaid">
graph TD
    manifest(AppManifest.json)
    manifest --> manifestVersion[manifestVersion]
    manifest --> name[name]
    manifest -.-> interfaces[interfaces]

    interfaces -- "0..n" --> interfaces.item(object)
    interfaces.item --> interfaces.item.type[type]
    interfaces.item -.-> interfaces.item.config[config]
</div>
<h3 id="functional-interface-types-supported-by-velocitas">Functional interface types supported by Velocitas</h3>
<p>Here is a list of functional interface types directly supported by the Velocitas toolchain and which Velocitas CLI packages are exposing the support:</p>
<ul>
<li><a href="./interfaces/vehicle_signal_interface/">Vehicle Signal Interface</a></li>
<li><a href="./interfaces/grpc_interface/">gRPC interface</a></li>
<li><a href="./interfaces/pubsub/">Publish and subscribe</a></li>
</ul>
<p>Support for additional interface types may be added by providing a 3rd party <a href="/velocitas/docs/concepts/lifecycle_management/packages/">CLI package</a>.</p>
<h2 id="planned-but-not-yet-available-features">Planned, but not yet available features</h2>
<p>Some FIs are dependent on used classes, methods or literals in your <em>Vehicle App</em>&rsquo;s source code. For example the <code>vehicle-model</code> FI requires you to list required or provided datapoints. At the moment, these attributes need to be filled <strong>manually</strong>. There are ideas to auto-generate these attributes by analyzing the source code, but nothing is planned for that, yet.</p>
<h2 id="further-information">Further information</h2>
<ul>
<li>Tutorial: <a href="/velocitas/docs/tutorials/quickstart.md">Quickstart</a></li>
<li>Tutorial: <a href="/velocitas/docs/tutorials/vehicle_model_creation">Vehicle Model Creation</a></li>
<li>Tutorial: <a href="/velocitas/docs/tutorials/vehicle_app_development"><em>Vehicle App</em> Development</a></li>
<li>Concept: <a href="/velocitas/docs/concepts/lifecycle_management">Lifecycle Management</a></li>
</ul>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-06180eeeb3db30bb96ef0f450ecbd44a">1.3.1 - Interfaces</h1>
    <div class="lead">Learn more about logical interfaces.</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-1f917e5c4ebe6310155840cf69f6083b">1.3.1.1 - Vehicle Signal Interface</h1>
    <div class="lead">The functional interface for providing vehicle signal access via VSS specification.</div>
	




<table class="table table-bordered">
<thead>
<tr>
<th>Providing CLI package</th>
<th>Interface type-key</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>devenv-devcontainer-setup</code></td>
<td><code>vehicle-signal-interface</code></td>
</tr>
</tbody>
</table>


<p>The <em>Vehicle Signal Interface</em> formerly known as <a href="/velocitas/docs/concepts/development_model/#vehicle-models"><em>Vehicle Model</em></a> interface type creates an interface to a signal interface described by the VSS spec. This interface will generate a source code package equivalent to the contents of your VSS JSON automatically upon devContainer creation.</p>
<p>If a <em>Vehicle App</em> requires a <code>vehicle-signal-interface</code>, it will act as a consumer of datapoints already available in the system. If, on the other hand, a <em>Vehicle App</em> provides a <code>vehicle-signal-interface</code>, it will act as a provider (formerly feeder in KUKSA terms) of the declared datapoints.</p>
<p>Furthermore, in the source code generated by this functional interface, a connection to <a href="https://github.com/eclipse/kuksa.val/tree/master/kuksa_databroker" target="_blank" rel="noopener">Kuksa Databroker</a> will be established via the configured Velocitas middleware. It uses the <code>broker.proto</code> if provided by the Kuksa Databroker to connect via gRPC. A seperate declaration of a <code>grpc-interface</code> for the databroker is <strong>NOT</strong> required.</p>
<p>More information: <a href="/velocitas/docs/tutorials/vehicle_model_creation/">Vehicle Model Creation</a></p>
<h2 id="configuration-structure">Configuration structure</h2>





<table class="table table-bordered">
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Example value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>src</code></td>
<td>string</td>
<td><code>&quot;https://github.com/COVESA/vehicle_signal_specification/releases/download/v3.0/vss_rel_3.0.json&quot;</code></td>
<td>URI of the used COVESA Vehicle Signal Specification JSON export. URI may point to a local file or to a file provided by a server. </td>
</tr>
<tr>
<td><code>datapoints</code></td>
<td>object</td>
<td>Object containing both required and provided datapoints.</td>
<td></td>
</tr>
<tr>
<td><code>datapoints.required</code></td>
<td>array</td>
<td>Array of required datapoints.</td>
<td></td>
</tr>
<tr>
<td><code>datapoints.required.[].path</code></td>
<td>string</td>
<td><code>Vehicle.Speed</code></td>
<td>Path of the VSS datapoint.</td>
</tr>
<tr>
<td><code>datapoints.required.[].optional</code></td>
<td>boolean?</td>
<td><code>true</code>, <code>false</code></td>
<td>Is the datapoint optional, i.e. can the <em>Vehicle App</em> work without the datapoint being present in the system. Defaults to <code>false</code>.</td>
</tr>
<tr>
<td><code>datapoints.required.[].access</code></td>
<td>string</td>
<td><code>read</code>, <code>write</code></td>
<td>What kind of access to the datapoint is needed by the application.</td>
</tr>
<tr>
<td><code>datapoints.provided</code></td>
<td>array</td>
<td>Array of provided datapoints.</td>
<td></td>
</tr>
<tr>
<td><code>datapoints.provided.[].path</code></td>
<td>string</td>
<td><code>Vehicle.Cabin.Seat.Row1.Pos1.Position</code></td>
<td>Path of the VSS datapoint.</td>
</tr>
</tbody>
</table>


<h2 id="example">Example</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;type&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;vehicle-signal-interface&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;config&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;src&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;https://github.com/COVESA/vehicle_signal_specification/releases/download/v3.0/vss_rel_3.0.json&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;datapoints&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;required&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;path&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Vehicle.Speed&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;access&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;read&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;path&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Vehicle.Body.Horn.IsActive&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;optional&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;access&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;write&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;provided&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;path&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Vehicle.Cabin.Seat.Row1.Pos1.Position&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-8727a2523109aee6b695de754adbe1fb">1.3.1.2 - gRPC Service Interface</h1>
    <div class="lead">The functional interface for supporting remote procedure calls via gRPC.</div>
	




<table class="table table-bordered">
<thead>
<tr>
<th>Providing CLI package</th>
<th>Interface type-key</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>devenv-devcontainer-setup</code></td>
<td><code>grpc-interface</code></td>
</tr>
</tbody>
</table>


<h2 id="description">Description</h2>
<p>This interface type introduces a dependency to a gRPC service. It is used to generate either client stubs (in case your application requires the interface) or server stubs (in case your application provides the interface). The result of the generation is a language specific and package manager specific source code package, integrated with the Velocitas SDK core.</p>
<p>If a <em>Vehicle App</em> requires a <code>grpc-interface</code> - a client stub embedded into the Velocitas framework will be generated and added as a build-time dependency of your application. It enables you to access your service from your <em>Vehicle App</em> without any additional effort.</p>
<p>If a <em>Vehicle App</em> provides a <code>grpc-interface</code> - a server stub embedded into the Velocitas framework will be generated and added as a build-time dependency of your application. It enables you to quickly add the business logic of your application.</p>
<h2 id="configuration-structure">Configuration structure</h2>





<table class="table table-bordered">
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Example value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>src</code></td>
<td>string</td>
<td><code>&quot;https://raw.githubusercontent.com/eclipse/kuksa.val.services/v0.2.0/seat_service/proto/sdv/edge/comfort/seats/v1/seats.proto&quot;</code></td>
<td>URI of the used protobuf specification of the service. URI may point to a local file or to a file provided by a server. It is generally recommended that a <strong>stable</strong> proto file is used. I.e. one that is already released under a proper tag rather than an in-development proto file. </td>
</tr>
<tr>
<td><code>required.methods</code></td>
<td>array</td>
<td>Array of service&rsquo;s methods that are accessed by the application. In addition to access control the methods attribute may be used to determine backward or forward compatibility i.e. if semantics of a service&rsquo;s interface did not change but methods were added or removed in a future version.</td>
<td></td>
</tr>
<tr>
<td><code>required.methods.[].name</code></td>
<td>string</td>
<td><code>&quot;Move&quot;</code>, <code>&quot;MoveComponent&quot;</code></td>
<td>Name of the method that the application would like to access</td>
</tr>
<tr>
<td><code>provided</code></td>
<td>object</td>
<td><code>{}</code></td>
<td>Reserved object indicating that the interface is provided. Might be filled with further configuration values.</td>
</tr>
</tbody>
</table>


<h2 id="example">Example</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;type&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;grpc-interface&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;config&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;src&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;https://raw.githubusercontent.com/eclipse/kuksa.val.services/v0.2.0/seat_service/proto/sdv/edge/comfort/seats/v1/seats.proto&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;required&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;methods&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>          <span style="color:#4e9a06">&#34;Move&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;MoveComponent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-ed6368117ef5ac95c9a264138bfe6bdc">1.3.1.3 - Publish Subscribe</h1>
    <div class="lead">The functional interface for supporting communication via publish and subscribe.</div>
	




<table class="table table-bordered">
<thead>
<tr>
<th>Providing CLI package</th>
<th>Interface type-key</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>devenv-runtimes</code></td>
<td><code>pubsub</code></td>
</tr>
</tbody>
</table>


<h2 id="description">Description</h2>
<p>This interface type introduces a dependency to a publish and subscribe middleware. While this may change in the future due to new middlewares being adopted, at the moment this will always indicate a dependency to MQTT.</p>
<p>If a <em>Vehicle App</em> requires <code>pubsub</code> - this will influence the generated deployment specs to include a publish and subscribe broker (i.e. an MQTT broker).</p>
<p>If a <em>Vehicle App</em> provides <code>pubsub</code> - this will influence the generated deployment specs to include a publish and subscribe broker (i.e. an MQTT broker).</p>
<h2 id="configuration-structure">Configuration structure</h2>





<table class="table table-bordered">
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Example value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>reads</code></td>
<td>array[string]</td>
<td><code>[ &quot;sampleapp/getSpeed&quot; ]</code></td>
<td>Array of topics which are read by the application.</td>
</tr>
<tr>
<td><code>writes</code></td>
<td>array[string]</td>
<td><code>[ &quot;sampleapp/currentSpeed&quot;, &quot;sampleapp/getSpeed/response&quot; ]</code></td>
<td>Array of topics which are written by the application.</td>
</tr>
</tbody>
</table>


<h2 id="example">Example</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;type&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;pubsub&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;config&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;reads&#34;</span><span style="color:#000;font-weight:bold">:</span>  <span style="color:#000;font-weight:bold">[</span> <span style="color:#4e9a06">&#34;sampleapp/getSpeed&#34;</span> <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;writes&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span> <span style="color:#4e9a06">&#34;sampleapp/currentSpeed&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;sampleapp/getSpeed/response&#34;</span> <span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div>
</div>



    
	
  

    
	
  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-745cbbc500d280d83e9fcaf94ecea84b">2 - Deployment Model</h1>
    <div class="lead">Learn more about our deployment model and guiding principles.</div>
	<p>The Velocitas project uses a common deployment model. It uses <a href="https://opencontainers.org/" target="_blank" rel="noopener">OCI-compliant</a> containers to increase the flexibility for the support of different programming languages and runtimes, which accelerates innovation and development. OCI-compliant containers also allow for a standardized yet flexible deployment process, which increases the ease of operation. Using OCI-compliant is portable to different architectures as long as there is support for OCI-compliant containers on the desired platform (e.g., like a container runtime for arm32, arm64 or amd64).</p>
<h2 id="guiding-principles">Guiding principles</h2>
<p>The deployment model is guided by the following principles</p>
<ul>
<li>Applications are provided as OCI-compliant container images.</li>
<li>The container runtime offers a Kubernetes-compatible control plane and API to manage the container lifecycle.</li>
<li>Helm charts are used as deployment descriptor specification.</li>
</ul>
<p>The template projects provided come with a pre-configured developer toolchain that accelerates the development process. The developer toolchain ensures an easy creation through a high-degree of automation of all required artifacts needed to follow the <em>Velocitas</em> principles.</p>
<h2 id="testing-your-container-during-development">Testing your container during development</h2>
<p>The <em>Velocitas</em> project provides for developers a repository template and devcontainer that contains everything to build a containerized version of your app locally and test it. Check out our <a href="/velocitas/docs/tutorials/">tutorial</a> e.g., for the <a href="https://github.com/eclipse-velocitas/vehicle-app-python-template" target="_blank" rel="noopener">Python template</a> to learn more.</p>
<h2 id="automated-container-image-builds">Automated container image builds</h2>
<p><em>Velocitas</em> uses GitHub workflows to automate the creation of your containerized application. A workflow is started with every increment of your application code that you push to your GitHub repository. The workflow creates a containerized version of your application and stores this container image in a registry. Further actions are carried out using this container (e.g., integration tests).</p>
<p>The workflows are set up to support multi-platform container creation and generate container images for amd64 and arm64 out of the box. This provides a great starting point for developers and lets you add additional support for further platforms easily.</p>
<h2 id="further-information">Further information</h2>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-9128db8048cd1b7aedfb97ce89217631">2.1 - Build and Release Process</h1>
    <div class="lead">Learn more about the provided continuous integration, and release process of a <em>Vehicle App</em>.</div>
	<p>The <em>Velocitas</em> project provides a two-stage process for development, continuous integration, and release of a new version of a <em>Vehicle App</em>.</p>
<ul>
<li>
<p><strong>Stage 1 - Build &amp; Test</strong>
On every new push to the <code>main</code> branch or every update to a pull request, a GitHub workflow is automatically executed to build your application as a container (optionally for different platforms), runs automated tests and code quality checks, and stores all results as GitHub artifacts for future reference with a <a href="https://docs.github.com/en/organizations/managing-organization-settings/configuring-the-retention-period-for-github-actions-artifacts-and-logs-in-your-organization" target="_blank" rel="noopener">default retention period of 90 days</a>.</p>
<p>The workflow provides a quick feedback during development and improves efficient collaboration.</p>
</li>
<li>
<p><strong>Stage 2 - Release</strong>
Once the application is ready to be released in a new version, a dedicated release workflow is automatically executed as soon as you create a new release via GitHub.</p>
<p>The release workflow bundles all relevant images and artifacts into one tagged set of files and pushes it to the GitHub Container Registry. In addition, all the information needed for quality assurance and documentation are published as release artifacts on GitHub. The image pushed to the GitHub Container Registry can afterwards be deployed on your target system using the Over-The-Air (OTA) update system of your choice.</p>
</li>
</ul>
<p>The drawing below illustrates the different workflows, actions and artifacts that are automatically created for you. All workflows are intended as a sensible baseline and can be extended and adapted to the needs of your own project.</p>
<p><img src="./publish_container.png" alt="Workflows"></p>
<h2 id="ci-workflow-ciymlhttpsgithubcomeclipse-velocitasvehicle-app-python-templateblobmaingithubworkflowsciyml">CI Workflow (<a href="https://github.com/eclipse-velocitas/vehicle-app-python-template/blob/main/.github/workflows/ci.yml" target="_blank" rel="noopener">ci.yml</a>)</h2>
<p>The <code>Continuous Integration (CI) workflow</code> is triggered on every commit to the main branch or when creating/updating a pull request and contains a set of actions to achieve the following objectives:</p>
<ul>
<li><strong>Building a container for the <em>Vehicle App</em></strong> - actions create a containerized version of the <em>Vehicle App</em>.</li>
<li><strong>Scanning for vulnerabilities</strong> - actions scan your code and container for vulnerabilities and in case of findings the workflow will be marked as &ldquo;failed&rdquo;.</li>
<li><strong>Running integration tests</strong> - actions provision a runtime instance and deploy all required services as containers together with your containerized application to allow for automatically executing integration test cases. In case the test cases fail, the workflow will be marked as &ldquo;failed&rdquo;.</li>
<li><strong>Running unit tests &amp; code coverage</strong> - actions run unit tests and calculate code coverage for your application, in case of errors or unsatisfactory code coverage, the workflow will be marked as &ldquo;failed&rdquo;.</li>
<li><strong>Storing scan &amp; test results as GitHub action artifacts</strong> - actions store results from the previously mentioned actions for further reference or download as Github Action Artifacts.</li>
</ul>
<p>Check out the example GitHub workflows in our <a href="https://github.com/eclipse-velocitas/vehicle-app-python-template/blob/main/.github/workflows/ci.yml" target="_blank" rel="noopener">template repository for Python</a></p>
<h2 id="build-multi-arch-image-workflow-build-multiarch-imageymlhttpsgithubcomeclipse-velocitasvehicle-app-python-templateblobmaingithubworkflowsbuild-multiarch-imageyml">Build multi-arch image Workflow (<a href="https://github.com/eclipse-velocitas/vehicle-app-python-template/blob/main/.github/workflows/build-multiarch-image.yml" target="_blank" rel="noopener">build-multiarch-image.yml</a>)</h2>
<p>The <code>Build multi-arch image workflow</code> is triggered on every commit to the main branch and contains a set of actions to achieve the following objectives:</p>
<ul>
<li><strong>Building a multi-arch container for the app</strong> - actions create a containerized version of the <em>Vehicle App</em> for multiple architectures (currently AMD64 and ARM64).</li>
<li><strong>Scanning for vulnerabilities</strong> - actions scan your code and container for vulnerabilities and in case of findings the workflow will be marked as &ldquo;failed&rdquo;.</li>
<li><strong>Storing container images to GitHub action artifacts</strong> - at the end of the workflow, the container image created is stored in a Github Action Artifacts so that it can be referenced by the Release Workflow later.</li>
<li><strong>Generate Deployment Files</strong> - actions generate a PodSpec-file and HelmCharts to ease the deployment of the <em>Vehicle App</em> and the runtime services.</li>
</ul>
<h2 id="release-workflow-releaseymlhttpsgithubcomeclipse-velocitasvehicle-app-python-templateblobmaingithubworkflowsreleaseyml">Release Workflow (<a href="https://github.com/eclipse-velocitas/vehicle-app-python-template/blob/main/.github/workflows/release.yml" target="_blank" rel="noopener">release.yml</a>)</h2>
<p>The <code>Release workflow</code> is triggered as soon as the <code>main</code> branch is ready for release and the <em>Vehicle App</em> developer creates a new GitHub release. This can be done manually through the GitHub UI.</p>
<p>On creating a new release with a specific new version, GitHub creates a tag and automatically runs the <code>Release workflow</code> defined in <code>.github/workflows/release.yml</code>, given that <code>CI workflow</code> has run successfully for the current commit on the main branch.</p>
<p>The set of actions included in the <code>Release workflow</code> cover the objective:</p>
<ul>
<li><strong>Generating and publishing QA information</strong> - actions load the QA information from GitHub artifacts stored for the same commit reference and verify it. Additionally, release documentation is generated and added to the GitHub release. If there is no information available for the current commit, the release workflow will fail.</li>
<li><strong>Publish as GitHub pages</strong> - all information from the release together with the project documentation is built as a static page using hugo. The result is pushed to a separate branch and can be published as a GitHub page in your repository.</li>
<li><strong>Pull &amp; label container image</strong> - actions pull the <em>Vehicle App</em> container image based on the current commit hash from the GitHub artifacts and label it with the specified tag version. If the image cannot be found, the workflow will fail.</li>
<li><strong>Push container image to ghcr.io</strong> - finally the labeled container image is pushed to the <a href="https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-container-registry" target="_blank" rel="noopener">GitHub container registry</a> and can be used as a deployment source.</li>
</ul>
<h2 id="github-actions-artifacts">GitHub Actions artifacts</h2>
<p><strong>GitHub Actions artifacts</strong> are used for storing data, which is generated by the <code>CI workflow</code> and referenced by the <code>Release workflow</code>. This saves time during workflow runs because we don&rsquo;t have to create artifacts multiple times.</p>
<p>GitHub Actions artifacts always have a retention period, which is 90 days by default. This may be configured differently in the specific GitHub organization. After this period, the QA info gets purged automatically. In this case, a re-run of the CI workflow would be required to regenerate all QA info needed for creating a release.</p>
<h2 id="container-registry">Container Registry</h2>
<p>The <a href="https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-container-registry" target="_blank" rel="noopener">GitHub container registry</a> is used for storing container images pushed by the <code>Release workflow</code>. These images can easily be used for a deployment and don&rsquo;t have a retention period.
Since the registry does not have an automatic cleanup, it keeps container images as long as they are not deleted. It is recommended that you automate the removal of older images to limit storage size and costs.</p>
<h2 id="versioning">Versioning</h2>
<p><em>Vehicle App</em> image versions are set to the Git tag name during release. Though any versioning scheme can be adopted, the usage of <a href="https://semver.org/" target="_blank" rel="noopener">semantic versions</a> is recommended.</p>
<p>If the tag name contains a semantic version, the leading <code>v</code> will be trimmed.
<strong>Example:</strong> A tag name of <code>v1.0.0</code> will lead to version <code>1.0.0</code> of the <em>Vehicle App</em> container.</p>
<h3 id="maintaining-multiple-versions">Maintaining multiple versions</h3>
<p>If there is a need to maintain multiple versions of a <em>Vehicle App</em>, e.g., to hotfix the production version while working on a new version at the same time or to support multiple versions in production, create and use <code>release branches</code>.</p>
<p>The release process would be the same as described in the overview, except that a release branch (e.g., <code>release/v1.0</code>) is created before the release step and the GitHub release is based on the <code>release</code> branch rather than the <code>main</code> branch. For hotfixes, release branches may be created retroactively from the release tag, if needed.</p>
<h2 id="further-information">Further information</h2>
<ul>
<li>Tutorial: <a href="/velocitas/docs/tutorials/vehicle_app_development/integration_tests">How to write integration tests</a></li>
<li>Tutorial: <a href="/velocitas/docs/tutorials/vehicle_app_deployment/helm_deployment.md">Deploy a <em>Vehicle App</em> with Helm</a></li>
<li>Tutorial: <a href="/velocitas/docs/tutorials/vehicle_app_deployment/podspecs_deployment.md">Deploy a <em>Vehicle App</em> with PodSpecs</a></li>
</ul>

</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-29875608fcd98c3d414ef8014b3ecce8">3 - Lifecycle Management</h1>
    <div class="lead">Learn more about our lifecycle management.</div>
	<h2 id="introduction">Introduction</h2>
<p>Once a repository has been created from one of our <em>Vehicle App</em> templates, basically the only way to receive updates into your derived repository is to manually pull changes, which would be quite tedious and error prone. This is where our <em>Lifecycle Management</em> comes to the rescue!</p>
<p>All of our main components of the development environment, like</p>
<ul>
<li>tools</li>
<li>runtimes</li>
<li>devcontainer configuration and setup</li>
<li>build systems</li>
<li>CI workflows</li>
</ul>
<p>are (or will be) provided as versioned <a href="/velocitas/docs/concepts/lifecycle_management/packages/">packages</a> which can be updated individually, if required.</p>
<p>The driver for this is our <a href="https://github.com/eclipse-velocitas/cli" target="_blank" rel="noopener">Velocitas CLI</a> which is our package manager for <em>Vehicle App</em> repositories.</p>
<h2 id="overview">Overview</h2>
<p><img src="./VADF_Lifecycle_Layout.drawio.svg" alt=""></p>
<p>Here we can see how the <code>MyVehicleApp</code> repository references package repositories by <em>Velocitas</em>, customer specific packages and some packages from a totally different development platform (Gitee).</p>
<p>If you want to learn more about how to reference and use packages check the sections for <a href="/velocitas/docs/concepts/lifecycle_management/project_configuration/">project configuration</a> and <a href="/velocitas/docs/concepts/lifecycle_management/packages/usage/">packages</a>.</p>
<h2 id="lifecycle-management-flow">Lifecycle Management flow</h2>
<p><img src="./VADF_Lifecycle_Flow.drawio.svg" alt=""></p>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-b1e17e9337e570b6cc90d7394e784ec5">3.1 - Project Configuration</h1>
    <div class="lead">Learn everything about Velocitas project configuration.</div>
	<p>Every <em>Vehicle App</em> repo comes with a <a href="https://github.com/eclipse-velocitas/vehicle-app-python-template/blob/main/.velocitas.json" target="_blank" rel="noopener"><code>.velocitas.json</code></a> which is the project configuration of your app. It holds references to the packages and their respective versions you are using in your project.</p>
<p>Here is an example of this configuration:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;packages&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;name&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;devenv-devcontainer-setup&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;version&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;v1.0.0&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;name&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;devenv-runtimes&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;version&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;v1.0.0&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;variables&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;foo&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;bar&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;baz&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>More detailed information and explanation about the project configuration and fields of the <code>.velocitas.json</code> can be found <a href="https://github.com/eclipse-velocitas/cli/blob/main/docs/PROJECT-CONFIG.md" target="_blank" rel="noopener">here</a>.</p>
<h2 id="next-steps">Next steps</h2>
<ul>
<li>Lifecycle Management: <a href="/velocitas/docs/concepts/lifecycle_management/packages/usage/">Usage of Packages</a></li>
<li>Lifecycle Management: <a href="/velocitas/docs/concepts/lifecycle_management/packages/development/">Development of Packages</a></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-739ff68b439cc6c1e31af1160467137d">3.2 - Velocitas CLI</h1>
    <div class="lead">Learn everything about the Velocitas CLI.</div>
	<h2 id="background">Background</h2>
<p>Our <a href="https://github.com/eclipse-velocitas/cli" target="_blank" rel="noopener">Velocitas CLI</a> is introduced to support the process of the lifecycle of a <em>Vehicle App</em> as a project manager.</p>
<h2 id="commands">Commands</h2>
<p>You can find all information about available commands <a href="https://github.com/eclipse-velocitas/cli/blob/main/README.md#commands" target="_blank" rel="noopener">here</a>.</p>
<h3 id="cli-flow-examples">CLI Flow examples</h3>
<h3 id="velocitas-create">velocitas create</h3>
<p>Create a new Velocitas Vehicle App project.


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>

    <code>velocitas create</code> needs to be executed inside our generic <a href="https://github.com/eclipse-velocitas/vehicle-app-template" target="_blank" rel="noopener">vehicle-app-template</a> (inside the devcontainer) where a so called <a href="https://github.com/eclipse-velocitas/vehicle-app-template/blob/main/package-index.json" target="_blank" rel="noopener"><code>package-index.json</code></a> is located for now, which is a central place of defining our extension and core packages with their respective exposed interfaces.

</div>
</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vscode ➜ /workspaces/vehicle-app-template <span style="color:#ce5c00;font-weight:bold">(</span>main<span style="color:#ce5c00;font-weight:bold">)</span> $ velocitas create
</span></span><span style="display:flex;"><span>Interactive project creation started
</span></span><span style="display:flex;"><span>&gt; What is the name of your project? MyApp
</span></span><span style="display:flex;"><span>&gt; Which programming language would you like to use <span style="color:#204a87;font-weight:bold">for</span> your project? <span style="color:#ce5c00;font-weight:bold">(</span>Use arrow keys<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>❯ python
</span></span><span style="display:flex;"><span>  cpp
</span></span><span style="display:flex;"><span>&gt; Would you like to use a provided example? No
</span></span><span style="display:flex;"><span>&gt; Which functional interfaces does your application have? <span style="color:#ce5c00;font-weight:bold">(</span>Press &lt;space&gt; to <span style="color:#204a87;font-weight:bold">select</span>, &lt;a&gt; to toggle all, &lt;i&gt; to invert selection, and &lt;enter&gt; to proceed<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>❯◉ Vehicle Signal Interface based on VSS and KUKSA Databroker
</span></span><span style="display:flex;"><span> ◯ gRPC service contract based on a proto interface description
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>Config <span style="color:#4e9a06">&#39;src&#39;</span> <span style="color:#204a87;font-weight:bold">for</span> interface <span style="color:#4e9a06">&#39;vehicle-signal-interface&#39;</span>: URI or path to VSS json <span style="color:#ce5c00;font-weight:bold">(</span>Leave empty <span style="color:#204a87;font-weight:bold">for</span> default: v3.0<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><h3 id="velocitas-init">velocitas init</h3>
<p>Download packages configured in your <code>.velocitas.json</code> to <a href="https://github.com/eclipse-velocitas/cli/blob/main/README.md#changing-default-velocitas_home-directory" target="_blank" rel="noopener">VELOCITAS_HOME</a></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vscode ➜ /workspaces/vehicle-app-python-template <span style="color:#ce5c00;font-weight:bold">(</span>main<span style="color:#ce5c00;font-weight:bold">)</span> $ velocitas init
</span></span><span style="display:flex;"><span>Initializing Velocitas packages ...
</span></span><span style="display:flex;"><span>... Downloading package: <span style="color:#4e9a06">&#39;devenv-runtimes:v1.0.1&#39;</span>
</span></span><span style="display:flex;"><span>... Downloading package: <span style="color:#4e9a06">&#39;devenv-github-workflows:v2.0.4&#39;</span>
</span></span><span style="display:flex;"><span>... Downloading package: <span style="color:#4e9a06">&#39;devenv-github-templates:v1.0.1&#39;</span>
</span></span><span style="display:flex;"><span>... Downloading package: <span style="color:#4e9a06">&#39;devenv-devcontainer-setup:v1.1.7&#39;</span>
</span></span><span style="display:flex;"><span>Running post init hook <span style="color:#204a87;font-weight:bold">for</span> model-generator
</span></span><span style="display:flex;"><span>Running <span style="color:#4e9a06">&#39;install-deps&#39;</span>
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><h3 id="velocitas-sync">velocitas sync</h3>
<p>If any package provides files they will be synchronized into your repository.


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>

    This will overwrite any changes you have made to the files manually! Affected files are prefixed with an auto generated notice:

</div>
</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vscode ➜ /workspaces/vehicle-app-python-template <span style="color:#ce5c00;font-weight:bold">(</span>main<span style="color:#ce5c00;font-weight:bold">)</span> $ velocitas sync
</span></span><span style="display:flex;"><span>Syncing Velocitas components!
</span></span><span style="display:flex;"><span>... syncing <span style="color:#4e9a06">&#39;devenv-github-workflows&#39;</span>
</span></span><span style="display:flex;"><span>... syncing <span style="color:#4e9a06">&#39;devenv-github-templates&#39;</span>
</span></span><span style="display:flex;"><span>... syncing <span style="color:#4e9a06">&#39;devenv-devcontainer-setup&#39;</span>
</span></span></code></pre></div><h3 id="velocitas-upgrade">velocitas upgrade</h3>
<p>Updates Velocitas components.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vscode ➜ /workspaces/vehicle-app-python-template <span style="color:#ce5c00;font-weight:bold">(</span>main<span style="color:#ce5c00;font-weight:bold">)</span> $ velocitas upgrade --dry-run
</span></span><span style="display:flex;"><span>Checking <span style="color:#204a87;font-weight:bold">for</span> updates!
</span></span><span style="display:flex;"><span>... <span style="color:#4e9a06">&#39;devenv-runtimes&#39;</span> is up to date!
</span></span><span style="display:flex;"><span>... <span style="color:#4e9a06">&#39;devenv-github-workflows&#39;</span> is up to date!
</span></span><span style="display:flex;"><span>... <span style="color:#4e9a06">&#39;devenv-github-templates&#39;</span> is up to date!
</span></span><span style="display:flex;"><span>... <span style="color:#4e9a06">&#39;devenv-devcontainer-setup&#39;</span> is currently at v1.1.6, can be updated to v1.1.7
</span></span><span style="display:flex;"><span>... Do you wish to <span style="color:#204a87;font-weight:bold">continue</span>? <span style="color:#ce5c00;font-weight:bold">[</span>y/n<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">[</span>y<span style="color:#ce5c00;font-weight:bold">]</span>: y
</span></span></code></pre></div><h3 id="velocitas-package">velocitas package</h3>
<p>Prints information about packages.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vscode ➜ /workspaces/vehicle-app-python-template <span style="color:#ce5c00;font-weight:bold">(</span>main<span style="color:#ce5c00;font-weight:bold">)</span> $ velocitas package devenv-devcontainer-setup
</span></span><span style="display:flex;"><span>devenv-devcontainer-setup
</span></span><span style="display:flex;"><span>    version: v1.1.7
</span></span><span style="display:flex;"><span>    components:
</span></span><span style="display:flex;"><span>      - id: devcontainer-setup
</span></span><span style="display:flex;"><span>        type: setup
</span></span><span style="display:flex;"><span>        variables:
</span></span><span style="display:flex;"><span>            language
</span></span><span style="display:flex;"><span>                type: string
</span></span><span style="display:flex;"><span>                description: The programming language of the project. Either <span style="color:#4e9a06">&#39;python&#39;</span> or <span style="color:#4e9a06">&#39;cpp&#39;</span>
</span></span><span style="display:flex;"><span>                required: <span style="color:#204a87">true</span>
</span></span><span style="display:flex;"><span>            repoType
</span></span><span style="display:flex;"><span>                type: string
</span></span><span style="display:flex;"><span>                description: The <span style="color:#204a87">type</span> of the repository: <span style="color:#4e9a06">&#39;app&#39;</span> or <span style="color:#4e9a06">&#39;sdk&#39;</span>
</span></span><span style="display:flex;"><span>                required: <span style="color:#204a87">true</span>
</span></span><span style="display:flex;"><span>            appManifestPath
</span></span><span style="display:flex;"><span>                type: string
</span></span><span style="display:flex;"><span>                description: Path of the AppManifest file, relative to the .velocitas.json
</span></span><span style="display:flex;"><span>                required: <span style="color:#204a87">true</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vscode ➜ /workspaces/vehicle-app-python-template <span style="color:#ce5c00;font-weight:bold">(</span>main<span style="color:#ce5c00;font-weight:bold">)</span> $ velocitas package devenv-devcontainer-setup -p
</span></span><span style="display:flex;"><span>/home/vscode/.velocitas/packages/devenv-devcontainer-setup/v1.1.7
</span></span></code></pre></div><h3 id="velocitas-exec">velocitas exec</h3>
<p>Executes a script contained in one of your installed components.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vscode ➜ /workspaces/vehicle-app-python-template <span style="color:#ce5c00;font-weight:bold">(</span>main<span style="color:#ce5c00;font-weight:bold">)</span> $ velocitas <span style="color:#204a87">exec</span> runtime-local run-vehicledatabroker
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#######################################################</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">### Running Databroker                              ###</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#######################################################</span>
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>More detailed usage can be found at the <a href="https://github.com/eclipse-velocitas/cli/blob/main/README.md" target="_blank" rel="noopener">Velocitas CLI README</a>.</p>
<h2 id="additional-information">Additional Information</h2>
<h3 id="cache-usage">Cache Usage</h3>
<p>The Velocitas CLI supports caching data for a <em>Vehicle App</em> project.
<br/>
The cache data makes it easy for any script/program of a component to read from or write to.
<br/>
More detailed information about the <em>Project Cache</em> can be found <a href="https://github.com/eclipse-velocitas/cli/blob/main/docs/features/PROJECT-CACHE.md" target="_blank" rel="noopener">here</a>.</p>
<h3 id="built-in-variables">Built-In Variables</h3>
<p>The Velocitas CLI also creates default environment variables which are available to every script/program.</p>





<table class="table table-bordered">
<thead>
<tr>
<th style="text-align:left">variable</th>
<th style="text-align:left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>VELOCITAS_WORKSPACE_DIR</code></td>
<td style="text-align:left">Current working directory of the <em>Vehicle App</em></td>
</tr>
<tr>
<td style="text-align:left"><code>VELOCITAS_CACHE_DIR</code></td>
<td style="text-align:left"><em>Vehicle App</em> project specific cache directory. e.g, <code>~/.velocitas/cache/&lt;generatedMd5Hash&gt;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>VELOCITAS_CACHE_DATA</code></td>
<td style="text-align:left">JSON string of <code>~/.velocitas/cache/&lt;generatedMd5Hash&gt;/cache.json</code></td>
</tr>
<tr>
<td style="text-align:left"><code>VELOCITAS_APP_MANIFEST</code></td>
<td style="text-align:left">JSON string of the <em>Vehicle App</em> AppManifest</td>
</tr>
</tbody>
</table>


<p>More detailed information about <em>Built-In Variables</em> can be found <a href="https://github.com/eclipse-velocitas/cli/blob/main/docs/features/VARIABLES.md" target="_blank" rel="noopener">here</a>.</p>
<h2 id="next-steps">Next steps</h2>
<ul>
<li>Lifecycle Management: <a href="/velocitas/docs/concepts/lifecycle_management/troubleshooting/">Troubleshooting</a></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-6c3cb9c783c45dba527a8208038a7f5a">3.3 - Phases</h1>
    <div class="lead">Learn about the different phases within the lifecycle of your project.</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-38dc69bce11fcbb8bd1b95cad7c70102">3.3.1 - Create</h1>
    <div class="lead">To be filled</div>
	<p>To be filled.</p>
<h4 id="template-based-creation-flow">Template based creation flow</h4>
<p><img src="../project_create_flow_old.drawio.svg" alt="Old creation flow"></p>
<h4 id="bootstrapping-creation-flow">Bootstrapping creation flow</h4>
<p><img src="../project_create_flow_new.drawio.svg" alt="New creation flow"></p>
<h4 id="resulting-velocitas-cli-and-velocitas-package-changes">Resulting Velocitas CLI and Velocitas Package changes</h4>
<ul>
<li>
<p><code>velocitas create</code> command shall be introduced</p>
<ul>
<li>it will guide through the project creation process, allowing the developer to add APIs and services at creation time which will reference the correct Velocitas CLI packages (either provided by Velocitas or by a 3rd party).</li>
<li>in addition to an interactive mode where create is invoked without arguments, there shall be a CLI mode where all of the arguments shall be passable as arguments</li>
</ul>
</li>
<li>
<p>Packages need to be available in a central registry (i.e. a new git repository) otherwise step 3 (depicted below) is not possible.</p>
</li>
<li>
<p>Packages need to expose which dependency types they are providing in their manifest. For each dependency type a human readable name for the type shall be exposed.</p>
</li>
</ul>
<h2 id="interaction-mockup">Interaction mockup</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>&gt; velocitas create
</span></span><span style="display:flex;"><span>... Creating a new Velocitas project!
</span></span><span style="display:flex;"><span>&gt; What is the name of your project?
</span></span><span style="display:flex;"><span>MyApp
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&gt; 1. Which programming language would you like to use <span style="color:#204a87;font-weight:bold">for</span> your project?
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">[</span> <span style="color:#ce5c00;font-weight:bold">]</span> Python
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">[</span>x<span style="color:#ce5c00;font-weight:bold">]</span> C++
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&gt; 2. Which integrations would you like to use? <span style="color:#ce5c00;font-weight:bold">(</span>multiple selections possible<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">[</span>x<span style="color:#ce5c00;font-weight:bold">]</span> Github
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">[</span>x<span style="color:#ce5c00;font-weight:bold">]</span> Gitlab
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">[</span> <span style="color:#ce5c00;font-weight:bold">]</span> Gitee
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&gt; 3. Which API dependencies does your project have?
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">[</span>x<span style="color:#ce5c00;font-weight:bold">]</span> gRPC service
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">[</span> <span style="color:#ce5c00;font-weight:bold">]</span> uProtocol service
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">[</span>x<span style="color:#ce5c00;font-weight:bold">]</span> Vehicle Service Catalogue
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&gt; 4. Add an API dependency <span style="color:#ce5c00;font-weight:bold">(</span>y/n<span style="color:#ce5c00;font-weight:bold">)</span>?
</span></span><span style="display:flex;"><span>y
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&gt; 5. What <span style="color:#204a87">type</span> of dependency?
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">[</span>x<span style="color:#ce5c00;font-weight:bold">]</span> gRPC-IF
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">[</span> <span style="color:#ce5c00;font-weight:bold">]</span> VSC-IF
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&gt; 6. URI of the .proto file?
</span></span><span style="display:flex;"><span>https://some-url/if.proto
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&gt; 7. Add an<span style="color:#ce5c00;font-weight:bold">(</span>other<span style="color:#ce5c00;font-weight:bold">)</span> API dependency <span style="color:#ce5c00;font-weight:bold">(</span>y/n<span style="color:#ce5c00;font-weight:bold">)</span>?
</span></span><span style="display:flex;"><span>n
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>... Project created!
</span></span></code></pre></div><p><em>Arguments mockup:</em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ velocitas create <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>    --name MyApp <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>    --lang cpp <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>    --package grpc-service-support <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>    --package vsc-support <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>    --require grpc-interface:https://some-url/if.proto
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&gt; Project created!
</span></span></code></pre></div>
</div>



    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-98a2d3470ae00b0fbd2f906a853a46bd">3.4 - Packages</h1>
    <div class="lead">Learn everything about Velocitas packages.</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-dc4d8d47cec83fedb195b5f4b1967c54">3.4.1 - Usage</h1>
    <div class="lead">Learn how to use velocitas packages.</div>
	<h2 id="overview">Overview</h2>
<p>After you have set up the <code>.velocitas.json</code> for your <a href="/velocitas/docs/concepts/lifecycle_management/project_configuration.md">project configuration</a>, using packages is pretty straight forward.</p>
<p>Currently, the packages provided by the <em>Velocitas</em> team are the following:





<table class="table table-bordered">
<thead>
<tr>
<th style="text-align:left">name</th>
<th style="text-align:left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a href="https://github.com/eclipse-velocitas/devenv-runtimes" target="_blank" rel="noopener">devenv-runtimes</a></td>
<td style="text-align:left">Containing scripts and configuration for <a href="/velocitas/docs/tutorials/vehicle_app_runtime/local_runtime/">Local</a> and <a href="/velocitas/docs/tutorials/vehicle_app_runtime/kubernetes_runtime/">Kubernetes</a> Runtime Services</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://github.com/eclipse-velocitas/devenv-devcontainer-setup" target="_blank" rel="noopener">devenv-devcontainer-setup</a></td>
<td style="text-align:left">Basic configuration for the devcontainer, like proxy configuration, post create scripts, entry points for the lifecycle management.</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://github.com/eclipse-velocitas/devenv-github-workflows" target="_blank" rel="noopener">devenv-github-workflows</a></td>
<td style="text-align:left">Containing github workflow files used by velocitas repositories</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://github.com/eclipse-velocitas/devenv-github-templates" target="_blank" rel="noopener">devenv-github-templates</a></td>
<td style="text-align:left">Containing github templates used by velocitas repositories</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://github.com/eclipse-velocitas/devenv-runtime-local" target="_blank" rel="noopener">devenv-runtime-local</a></td>
<td style="text-align:left">Central configuration for local runtime execution (deprecated)</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://github.com/eclipse-velocitas/devenv-runtime-k3d" target="_blank" rel="noopener">devenv-runtime-k3d</a></td>
<td style="text-align:left">Central configuration for k3d runtime execution (deprecated)</td>
</tr>
</tbody>
</table>


</br></p>
<p>To see how these provided packages are used inside a <code>.velocitas.json</code> you can use the <a href="https://github.com/eclipse-velocitas/vehicle-app-python-template/blob/main/.velocitas.json" target="_blank" rel="noopener">Python template repository</a> as a reference.</p>
<h2 id="installation">Installation</h2>
<p>The <a href="https://github.com/eclipse-velocitas/cli" target="_blank" rel="noopener">Velocitas CLI</a> - acting as a package manager for <em>Vehicle App</em> repositories - is installed inside our <a href="https://github.com/eclipse-velocitas/devcontainer-base-images" target="_blank" rel="noopener">devcontainer-base-images</a>.
</br>
After creation of a devcontainer a <a href="https://github.com/eclipse-velocitas/vehicle-app-python-template/blob/main/.devcontainer/scripts/postCreateCommand.sh#L18" target="_blank" rel="noopener">postCreateCommand</a> is configured to be executed which runs:</p>
<ul>
<li><code>velocitas init</code> which will initialize all packages referenced in your <code>.velocitas.json</code>. That means, it will download them and run their respective <a href="https://github.com/eclipse-velocitas/cli/blob/main/docs/features/PACKAGES.md#onpostinit---arrayexecspec" target="_blank" rel="noopener">onPostInit</a> programs, if any. (e.g, <a href="/velocitas/docs/tutorials/vehicle_model_creation/automated_model_lifecycle">automated model generation</a>)</li>
<li><code>velocitas sync</code> to sync files provided by some packages.</li>
</ul>
<p>Check the section about our <a href="/velocitas/docs/concepts/lifecycle_management/velocitas_cli/">Velocitas CLI</a> to learn more about the background and usage of it.</p>
<h2 id="velocitas-home-directory">Velocitas Home Directory</h2>
<p>The packages will be downloaded by the <a href="/velocitas/docs/concepts/lifecycle_management/velocitas_cli/">Velocitas CLI</a> to <code>~/.velocitas/packages/&lt;package_name&gt;</code>. More Information: <a href="https://github.com/eclipse-velocitas/cli/blob/main/README.md#changing-default-velocitas_home-directory" target="_blank" rel="noopener">VELOCITAS_HOME</a>.</p>
<h2 id="next-steps">Next steps</h2>
<ul>
<li>Lifecycle Management: <a href="/velocitas/docs/concepts/lifecycle_management/packages/development/">Development of Packages</a></li>
<li>Lifecycle Management: <a href="/velocitas/docs/concepts/lifecycle_management/velocitas_cli/">Velocitas CLI</a></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-63749fac4a2616727da54d76eb2022ff">3.4.2 - Development</h1>
    <div class="lead">Learn how to develop an own package.</div>
	<h2 id="getting-started">Getting started</h2>
<p>First thing you need to do is to create a repository at e.g., <code>https://github.com/my-organisation/my-velocitas-package</code>. The URL needs to be referenced in the <code>.velocitas.json</code> of your <em>Vehicle App</em> repository.</p>
<h2 id="general-configuration-of-packages">General configuration of Packages</h2>
<p>Every <em>Package</em> repository needs a <code>manifest.json</code> at their root. The <code>manifest.json</code> is the package configuration and holds package relevant information and its behaviour.</p>
<p>Here are examples of this configuration:</p>
<ul>
<li><a href="https://github.com/eclipse-velocitas/devenv-runtimes/blob/main/manifest.json" target="_blank" rel="noopener">devenv-runtimes manifest</a></li>
<li><a href="https://github.com/eclipse-velocitas/devenv-devcontainer-setup/blob/main/manifest.json" target="_blank" rel="noopener">devenv-devcontainer-setup manifest</a></li>
</ul>
<p>The manifest of a package describes a list of components. They are a collection of programs or files that serve a similar purpose or are inheritly connected. I.e. they provide a single runtime, a deployment for a runtime or add configuration required for Github Workflows or the devcontainer.
<br/></p>
<p>More detailed information and explanation about configuration fields of the <code>manifest.json</code> and package development can be found <a href="https://github.com/eclipse-velocitas/cli/blob/main/docs/features/PACKAGES.md" target="_blank" rel="noopener">here</a>.</p>
<h2 id="configuration-of-runtime-packages">Configuration of Runtime Packages</h2>
<p>If you want to add a new service, adapt <a href="https://github.com/eclipse-velocitas/devenv-runtimes/blob/main/runtime.json" target="_blank" rel="noopener"><code>runtime.json</code></a> and <a href="https://github.com/eclipse-velocitas/devenv-runtimes/blob/main/manifest.json" target="_blank" rel="noopener"><code>manifest.json</code></a>. In order to use a newly created or updated service, new changes on <a href="https://github.com/eclipse-velocitas/devenv-runtimes/tree/main" target="_blank" rel="noopener">devenv-runtimes</a> need to be tagged and referenced inside <a href="https://github.com/eclipse-velocitas/vehicle-app-python-template/blob/main/.velocitas.json" target="_blank" rel="noopener"><code>.velocitas.json</code></a> of the respective package version via a tag or branch name of the repository. When a version is changed in your <a href="https://github.com/eclipse-velocitas/vehicle-app-python-template/blob/main/.velocitas.json" target="_blank" rel="noopener"><code>.velocitas.json</code></a> you have to initialize it through <code>velocitas init</code> from the terminal so the new package version will be installed. A new service can be started by using velocitas cli command <code>velocitas exec runtime-local &lt;service_id&gt; &lt;args&gt;</code> which can be also configured inside your <code>./.vscode/tasks.json</code>.</p>
<p>If you plan to develop a <em>Package</em> with the purpose of managing the runtime used together with your <em>Vehicle App</em> the package needs a <code>runtime.json</code> at their root. The <code>runtime.json</code> is the runtime configuration containing all information for the relevant service dependencies with the following three required attributes:</p>





<table class="table table-bordered">
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>unique service id</td>
</tr>
<tr>
<td>interfaces</td>
<td>used for dependency resolution between <em>Vehicle App</em> and runtime</td>
</tr>
<tr>
<td>config</td>
<td>configurations in form of Key/Value pair with specific pre–defined keys and corresponding values</td>
</tr>
</tbody>
</table>


<h2 id="supported-config-keys-of-a-service">Supported config keys of a service</h2>





<table class="table table-bordered">
<thead>
<tr>
<th>Key</th>
<th>Value Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>image</td>
<td>URI of a container image</td>
</tr>
<tr>
<td>port</td>
<td>port number</td>
</tr>
<tr>
<td>port-forward</td>
<td>port mapping for forwarding</td>
</tr>
<tr>
<td>env</td>
<td>environment variable used by the service: <code>&lt;env_key&gt;=&lt;env_value&gt;</code></td>
</tr>
<tr>
<td>mount</td>
<td>path for mounting files: <code>&lt;source_path&gt;:&lt;target_path&gt;</code></td>
</tr>
<tr>
<td>arg</td>
<td>argument for starting the service</td>
</tr>
<tr>
<td>start-pattern</td>
<td>optional start pattern for identifying if the service starts correctly</td>
</tr>
</tbody>
</table>


<h3 id="runtime-configuration-helper">Runtime configuration helper</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;id&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;&lt;service_id&gt;&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;interfaces&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>        <span style="color:#4e9a06">&#34;&lt;interface&gt;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;config&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;key&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;image&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;value&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;&lt;image&gt;:&lt;tag&gt;&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;key&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;port&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;value&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;&lt;port_number&gt;&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;key&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;port-forward&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;value&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;&lt;source_port&gt;:&lt;target_port&gt;&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;key&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;env&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;value&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;&lt;env_key&gt;=&lt;env_value&gt;&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;key&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;mount&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;value&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;&lt;source_path&gt;:&lt;target_path&gt;&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;key&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;arg&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;value&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;&lt;arg&gt;&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;key&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;start-pattern&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;value&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;.*Listening on \\d+\\.\\d+\\.\\d+\\.\\d+:\\d+&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>In order to use a newly created or updated service, changes on the respective <em>Package</em> need to be tagged and referenced inside the <a href="https://github.com/eclipse-velocitas/vehicle-app-python-template/blob/main/.velocitas.json" target="_blank" rel="noopener"><code>.velocitas.json</code></a> of your <em>Vehicle App</em> repository via a tag or branch name of the repository. More info about installation: <a href="/velocitas/docs/concepts/lifecycle_management/packages/usage/#installation">Usage</a>.</p>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>

    A new service can be started manually and/or configured inside your <code>./.vscode/tasks.json</code> with:
</br> <code>velocitas exec runtime-&lt;runtime&gt; &lt;service_id&gt; &lt;args&gt;</code>

</div>

<h2 id="next-steps">Next steps</h2>
<ul>
<li>Lifecycle Management: <a href="/velocitas/docs/concepts/lifecycle_management/velocitas_cli/">Velocitas CLI</a></li>
</ul>

</div>



    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-4687c53ccc9a9f3fecf47d97b4079d42">3.5 - Troubleshooting</h1>
    <div class="lead">Known issues and fixes.</div>
	<h3 id="github-rate-limit-exceeded">GitHub rate limit exceeded</h3>
<p>To avoid exceeding GitHubs rate limit we suggest to generate a personal access token in your <a href="https://github.com/settings/tokens" target="_blank" rel="noopener">GitHub settings</a> and set it as an environment variable:</p>



<ul class="nav nav-tabs" id="tabs-0" role="tablist">
  <li class="nav-item">
      <a class="nav-link active"
          id="tabs-00-00-tab" data-toggle="tab" href="#tabs-00-00" role="tab"
          aria-controls="tabs-00-00" aria-selected="false">
        Mac/Linux
      </a>
    </li><li class="nav-item">
      <a class="nav-link"
          id="tabs-00-01-tab" data-toggle="tab" href="#tabs-00-01" role="tab"
          aria-controls="tabs-00-01" aria-selected="false">
        Windows
      </a>
    </li>
</ul>

<div class="tab-content" id="tabs-0-content">
    <div class="tab-body tab-pane fade show active"
        id="tabs-00-00" role="tabpanel" aria-labelled-by="tabs-00-00-tab">
        <p><code>export GITHUB_API_TOKEN=&lt;your_api_token&gt;</code></p>

    </div>
    <div class="tab-body tab-pane fade"
        id="tabs-00-01" role="tabpanel" aria-labelled-by="tabs-00-01-tab">
        <p><code>set GITHUB_API_TOKEN=&lt;your_api_token&gt;</code>
</br>
or
</br>
Set environment variable via system settings GITHUB_API_TOKEN=&lt;your_api_token&gt;</p>

    </div>
</div>

<p>After you have set the ENV consider to restart VS Code.</p>
<p>It is important that VS Code has access to this ENV during the <code>postCreateCommand</code> inside the devcontainer.
If you experienced this error and the devcontainer still has started correctly please run either:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vscode ➜ /workspaces/vehicle-app-python-template <span style="color:#ce5c00;font-weight:bold">(</span>main<span style="color:#ce5c00;font-weight:bold">)</span> $ ./.devcontainer/scripts/postCreateCommand.sh
</span></span></code></pre></div><p>or</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vscode ➜ /workspaces/vehicle-app-python-template <span style="color:#ce5c00;font-weight:bold">(</span>main<span style="color:#ce5c00;font-weight:bold">)</span> $ velocitas init
</span></span><span style="display:flex;"><span>vscode ➜ /workspaces/vehicle-app-python-template <span style="color:#ce5c00;font-weight:bold">(</span>main<span style="color:#ce5c00;font-weight:bold">)</span> $ velocitas sync
</span></span></code></pre></div>
</div>



    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-e87d2d922d0a384a3f8a70e87e29d33f">4 - Logging guidelines</h1>
    <div class="lead">How logging shall be handled by Vehicle Applications.</div>
	<p>Rationale: Logging application behavior is absolutely necessary for monitoring applications and also track down possible issues.</p>
<h2 id="levels">Levels</h2>
<p>In Velocitas, we establish the following log levels, ordered from lowest to highest priority:</p>





<table class="table table-bordered">
<thead>
<tr>
<th style="text-align:left">Level</th>
<th style="text-align:left">Purpose</th>
<th style="text-align:left">Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Debug</td>
<td style="text-align:left">Display of information to aid debugging of live systems like resolved values, executed lines of code, taken branches etc&hellip;</td>
<td style="text-align:left"><code>&quot;variable=5&quot;</code>,<br/> <code>&quot;executing branch debug==false&quot;</code></td>
</tr>
<tr>
<td style="text-align:left">Info</td>
<td style="text-align:left">Display of regular, user friendly messages to indicate the current state of the application.</td>
<td style="text-align:left"><code>&quot;Startup successful&quot;</code>,<br/> <code>&quot;Application ready&quot;</code></td>
</tr>
<tr>
<td style="text-align:left">Warning</td>
<td style="text-align:left">Deviation from <em>optimal</em> program flow which is tolerable by the application, but not recommended.</td>
<td style="text-align:left"><code>&quot;Memory usage exceeding upper bounds!&quot;</code>,<br/><code>&quot;Usage of deprecated API&quot;</code></td>
</tr>
<tr>
<td style="text-align:left">Error</td>
<td style="text-align:left">Display of a type of failure that is not expected and can lead to unexpected or degraded behavior which may lead to program termination.</td>
<td style="text-align:left"><code>&quot;Memory allocation failed!&quot;</code>, <br/><code>&quot;Unable to persist data&quot;</code></td>
</tr>
<tr>
<td style="text-align:left">Critical</td>
<td style="text-align:left">Display of a failure which leads to system unavailablity due to a missing feature, i.e. a database connection.</td>
<td style="text-align:left"><code>&quot;Database not available&quot;</code>,<br/><code>&quot;Unable to establish connection to server!&quot;</code></td>
</tr>
</tbody>
</table>


<h2 id="destination-of-log-levels">Destination of log levels</h2>
<h3 id="historically">Historically</h3>
<p>On *nix systems the philosophy is for programs to be as silent as possible by default. stdout is reserved for <em>regular</em> program output. Logging is <strong>never</strong> regular program output, it is there for diagnostic reasons</p>
<p>See the ls program as an example:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls
</span></span><span style="display:flex;"><span>integration  logs  requirements.txt
</span></span></code></pre></div><p>Regular output is written to stdout and should not be poluted by logging because it is designed to be pipeable into other programs.</p>
<h3 id="what-does-this-mean-for-vehicle-appsservices">What does this mean for Vehicle Apps/Services?</h3>
<p>An app or a service is a <strong>long running, self-contained application</strong> which is inheritly not designed to execute and terminate quickly such that its output may be piped into other programs. Therefore, stdout would be free to be used for log levels, since there is no &ldquo;regular output&rdquo;.</p>
<p>However, due to the inherent nature of logs not being regular problem output and the issue of potentially re-ordering messages when they are directed to different files, in Velocitas we chose to output all logs to <code>stderr</code>:</p>
<p>Here the overview in table form:





<table class="table table-bordered">
<thead>
<tr>
<th style="text-align:left">Level</th>
<th style="text-align:right">Target file</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Debug</td>
<td style="text-align:right">stderr</td>
</tr>
<tr>
<td style="text-align:left">Info</td>
<td style="text-align:right">stderr</td>
</tr>
<tr>
<td style="text-align:left">Warning</td>
<td style="text-align:right">stderr</td>
</tr>
<tr>
<td style="text-align:left">Error</td>
<td style="text-align:right">stderr</td>
</tr>
<tr>
<td style="text-align:left">Critical</td>
<td style="text-align:right">stderr</td>
</tr>
</tbody>
</table>

</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://julienharbulot.com/python-cli-streams.html" target="_blank" rel="noopener">https://julienharbulot.com/python-cli-streams.html</a></li>
<li><a href="https://sematext.com/blog/logging-levels/" target="_blank" rel="noopener">https://sematext.com/blog/logging-levels/</a></li>
<li><a href="https://softwareengineering.stackexchange.com/questions/439462/log-levels-and-stdout-vs-stderr" target="_blank" rel="noopener">https://softwareengineering.stackexchange.com/questions/439462/log-levels-and-stdout-vs-stderr</a></li>
</ul>

</div>



    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Eclipse Velocitas Project" aria-label="Eclipse Velocitas Project">
    <a class="text-white" target="_blank" rel="noopener" href="https://projects.eclipse.org/projects/automotive.velocitas" aria-label="Eclipse Velocitas Project">
      <i class="fas fa-external-link-alt"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Developer mailing list" aria-label="Developer mailing list">
    <a class="text-white" target="_blank" rel="noopener" href="https://accounts.eclipse.org/mailing-list/velocitas-dev" aria-label="Developer mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Gitter" aria-label="Gitter">
    <a class="text-white" target="_blank" rel="noopener" href="https://app.gitter.im/#/room/#eclipse-velocitas_community:gitter.im" aria-label="Gitter">
      <i class="fab fa-gitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" rel="noopener" href="https://twitter.com/velocitas_sdv" aria-label="Twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/eclipse-velocitas" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Developer Meeting(s)" aria-label="Developer Meeting(s)">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/eclipse-velocitas/velocitas-docs/wiki/Developer-Meetup%28s%29" aria-label="Developer Meeting(s)">
      <i class="fa-solid fa-users"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2023 The Eclipse Velocitas™ Project. All Rights Reserved.</small>
        
        
      </div>
    </div>
    <div class="row">
      <div class="col-12 text-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2">
    <small class="ml-1">
      <a class="text-footer-menu" target="_blank" rel="noopener" href="https://eclipse.org">
        Eclipse Foundation
      </a>
    </small>
  </li>
  
  <li class="list-inline-item mx-2">
    <small class="ml-1">
      <a class="text-footer-menu" target="_blank" rel="noopener" href="https://eclipse.org/legal/privacy.php">
        Privacy Policy
      </a>
    </small>
  </li>
  
  <li class="list-inline-item mx-2">
    <small class="ml-1">
      <a class="text-footer-menu" target="_blank" rel="noopener" href="https://eclipse.org/legal/termsofuse.php">
        Terms of Use
      </a>
    </small>
  </li>
  
  <li class="list-inline-item mx-2">
    <small class="ml-1">
      <a class="text-footer-menu" target="_blank" rel="noopener" href="https://eclipse.org/legal/copyright.php">
        Copyright Agent
      </a>
    </small>
  </li>
  
  <li class="list-inline-item mx-2">
    <small class="ml-1">
      <a class="text-footer-menu" target="_blank" rel="noopener" href="https://eclipse.org/legal/">
        Legal
      </a>
    </small>
  </li>
  
  <li class="list-inline-item mx-2">
    <small class="ml-1">
      <a class="text-footer-menu" target="_blank" rel="noopener" href="https://eclipse.org/legal/epl-2.0/">
        License
      </a>
    </small>
  </li>
  
  <li class="list-inline-item mx-2">
    <small class="ml-1">
      <a class="text-footer-menu" target="_blank" rel="noopener" href="https://eclipse.org/security/">
        Report a Vulnerability
      </a>
    </small>
  </li>
  
</ul>

        
        
      </div>
  </div>
</footer>


    </div>
    
  <script src="/velocitas/js/main.min.2aff983e9d0d8ecff9ed53e14b657216e2d8d2aff059bf4a5651283020995f1b.js" integrity="sha256-Kv&#43;YPp0Njs/57VPhS2VyFuLY0q/wWb9KVlEoMCCZXxs=" crossorigin="anonymous"></script>
<script src='/velocitas/js/tabpane-persist.js'></script>

  </body>
</html>
